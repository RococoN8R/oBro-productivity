/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => oBro
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
"use strict;";
var DEFAULT_SETTINGS = {
  searchTag: "",
  viewList: false,
  searchPath: "",
  viewHiddenFiles: false,
  taskHeaderSize: 5
};
var statusBar;
var oBro = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.app.workspace.onLayoutReady(() => {
      if (this.app.plugins.plugins["dataview"]) {
        console.log(`oBro ${this.manifest.version}: DataView plugin is ready.`);
      } else {
        console.error(`oBro ${this.manifest.version}: DataView plugin not enabled.`);
      }
      statusBar = this.addStatusBarItem();
      statusBar.createEl("span", { text: "oBro's ready!" });
      statusBar.createEl("span", { text: "" });
      statusBar.createEl("span", { text: "" });
    });
    addEventListener("DOMContentLoaded", function() {
      console.log('oBro: "DOMContentLoaded" event has fired!');
      function makeHeadersSticky() {
        const headers = document.querySelectorAll(
          ".markdown-preview-section h1, .markdown-preview-section h2, .markdown-preview-section h3"
        );
        headers.forEach((header) => {
          header.style.position = "sticky";
          header.style.top = "0";
          header.style.zIndex = "1000";
          header.style.backgroundColor = "white";
        });
      }
      makeHeadersSticky();
      window.obsidian.plugins.subscribe("editor-preview", makeHeadersSticky);
    });
    this.addSettingTab(new oBroSettingsTab(this.app, this));
    window.viewPagesRecent = async (dv, args) => {
      if (window.app.plugins.plugins.dataview) {
        ctx.getContext(this.settings, dv, args);
        if (ctx.searchPath == ".")
          ctx.searchPath = "";
        let p = await dv.pages(ctx.searchPath == "." ? "" : ctx.searchPath).sort((t) => -t.file.mtime.ts);
        await dv.table(
          [
            "File",
            "Tasks",
            "Last Modified",
            "Size",
            "Folder",
            ctx.viewHiddenFiles ? "Visible" : ""
          ],
          p.where((p2) => isFileVisible(p2.file.path, ctx.viewHiddenFiles)).map((p2) => [
            p2.file.link,
            p2.file.tasks.length,
            p2.file.mtime,
            p2.file.size,
            p2.file.folder,
            ctx.viewHiddenFiles ? isFileVisible(p2.file.path) : ""
          ])
        );
      } else {
        console.error("DataView plugin is not enabled");
      }
    };
    window.helpPages = async (dv, args) => {
      dv.header(5, "Page Management");
      dv.span("The following commands are available to manage pages:");
      dv.span("- **`viewPagesRecent(dv, args)`** - Lists pages sorted by last modified date");
      dv.span(
        "Use the following arguments to filter the pages: _searchPath_, _viewHiddenFiles_"
      );
    };
    window.viewTaskStages = async (dv, args) => {
      await tsks.update(this.settings, dv, args);
      let md = await dv.markdownTable(
        ["Stage", "Qty"],
        [
          ["Overdue", tsks.overdue.length],
          ["This Week", tsks.thisWeek.length],
          ["Next Week", tsks.nextWeek.length],
          ["Started", tsks.started.length],
          ["Backlog", tsks.notPrioritized.length],
          ["Completed", tsks.completed.length]
        ]
      );
      await dv.span(md);
    };
    window.viewTaskProgression = async (dv, args) => {
      await tsks.update(this.settings, dv, args);
      let md = await dv.markdownTable(
        ["In Progress", "Backlog", "Completed", "Total"],
        [
          [
            tsks.overdue.length + tsks.thisWeek.length + tsks.nextWeek.length + tsks.started.length,
            tsks.notPrioritized.length,
            tsks.completed.length,
            tsks.overdue.length + tsks.thisWeek.length + tsks.nextWeek.length + tsks.started.length + tsks.notPrioritized.length + tsks.completed.length
          ]
        ]
      );
      await dv.span(md);
    };
    window.viewTasksPrioritized = async (dv, args) => {
      await tsks.update(this.settings, dv, args);
      await tsks.show(
        dv,
        "Overdue",
        tsks.overdue.sort((s) => s.due, "desc")
      );
      await tsks.show(
        dv,
        "This Week",
        tsks.thisWeek.sort((s) => s.due, "asc")
      );
      await tsks.show(
        dv,
        "Next Week",
        tsks.nextWeek.sort((s) => s.due, "asc")
      );
      await tsks.show(
        dv,
        "In Progress",
        tsks.started.sort((s) => s.start, "asc")
      );
      await tsks.show(
        dv,
        "Completed Recently",
        tsks.completed.where((w) => w.completion >= ctx.so4wa).sort((s) => s.completion, "asc")
      );
      await tsks.show(
        dv,
        "Cancelled",
        tsks.notPrioritized.where((w) => w.viewStatus == "-")
      );
    };
    window.viewTasksPlanning = async (dv, args) => {
      await tsks.update(this.settings, dv, args);
      await tsks.show(
        dv,
        "Prioritize",
        tsks.notPrioritized.where((t) => t.status == "!").sort((s) => s.due, "asc")
      );
      await tsks.show(
        dv,
        "Open Questions",
        tsks.notPrioritized.where((t) => t.status == "?").sort((s) => s.due, "asc")
      );
      await tsks.show(
        dv,
        "Schedule",
        tsks.notPrioritized.where((t) => t.status == ">").sort((s) => s.due, "asc")
      );
      await tsks.show(
        dv,
        "Review",
        tsks.notPrioritized.where((t) => t.status == "R").sort((s) => s.due, "asc")
      );
      await tsks.show(
        dv,
        "Backlog",
        tsks.notPrioritized.where((t) => t.status == " ").sort((s) => s.due, "asc")
      );
    };
    window.viewTasksIdeation = async (dv, args) => {
      await tsks.update(this.settings, dv, args);
      await tsks.show(
        dv,
        "Ideas",
        tsks.notPrioritized.where((t) => t.status == "i").sort((s) => s.due, "asc")
      );
      await tsks.show(
        dv,
        "Bookmarks",
        tsks.notPrioritized.where((t) => t.status == "b").sort((s) => s.due, "asc")
      );
      await tsks.show(
        dv,
        "Pros",
        tsks.notPrioritized.where((t) => t.status == "p").sort((s) => s.due, "asc")
      );
      await tsks.show(
        dv,
        "Cons",
        tsks.notPrioritized.where((t) => t.status == "c").sort((s) => s.due, "asc")
      );
    };
    window.helpTasks = async (dv, args) => {
      dv.header(tsks.headerSize, "Task Management");
      dv.span("###### The following commands are available to manage tasks");
      dv.span("- **`viewPagesRecent(dv, args)`** - Lists pages sorted by last modified date");
      dv.span("- **`viewTaskStages(dv, args)`** - Shows task stages and quantities");
      dv.span("- **`viewTaskProgression(dv, args)`** - Shows overall task progression");
      dv.span("- **`viewTasksPrioritized(dv, args)`** - Shows prioritized tasks by status");
      dv.span("- **`viewTasksPlanning(dv, args)`** - Shows tasks ready for planning");
      dv.span("- **`viewTasksIdeation(dv, args)`** - Shows tasks needing ideation");
      dv.span("Use the following arguments to filter the tasks");
      dv.span(
        "- **`searchPath`** - Filter tasks by path (e.g. -- `{searchPath: '\"path/to/folder\"'}`)"
      );
      dv.span(
        "- **`viewHiddenFiles`** - Include hidden files in the search (e.g. -- `{viewHiddenFiles: true}`)"
      );
      dv.span("###### Task notations");
      dv.span("**Task Status**");
      dv.span("- [ ] to-do [ ]");
      dv.span("- [/] in process [/]");
      dv.span("- [x] completed [x]");
      dv.span("- [-] cancelled [-]");
      dv.span("**Planning & Organization**");
      dv.span("- [!] priority [!]");
      dv.span("- [?] question [?]");
      dv.span("- [>] schedule [>]");
      dv.span("- [R] review [R]");
      dv.span("**Ideation & Reference**");
      dv.span("- [i] idea [i]");
      dv.span("- [b] bookmark [b]");
      dv.span("- [p] pro [p]");
      dv.span("- [c] con [c]");
    };
    window.viewTags = async (dv, args) => {
      tags.update(this.settings, dv, args);
      tags.view(dv, "All Tags", tags.all);
    };
    window.viewTagsAIs = async (dv, args) => {
      tags.update(this.settings, dv, args);
      tags.view(
        dv,
        "Action Items",
        tags.all.where((w) => w.tags.startsWith("#ai/"))
      );
    };
    window.viewTagsApps = async (dv, args) => {
      tags.update(this.settings, dv, args);
      tags.view(
        dv,
        "Applications",
        tags.all.where((w) => w.tags.startsWith("#ap/"))
      );
    };
    window.viewTagsDiscussions = async (dv, args) => {
      tags.update(this.settings, dv, args);
      tags.view(
        dv,
        "Discussions",
        tags.all.where((w) => w.tags.startsWith("#d/"))
      );
    };
    window.viewTagsProjects = async (dv, args) => {
      tags.update(this.settings, dv, args);
      tags.view(
        dv,
        "Projects",
        tags.all.where((w) => w.tags.startsWith("#p/"))
      );
    };
    window.helpTags = async (dv, args) => {
      dv.header(tsks.headerSize, "Tag Management");
      dv.span("The following commands are available to manage tags:");
      dv.span("- **`viewTags(dv, args)`** - Lists tags sorted in alphabetical order");
      dv.span("- **`viewTagsAIs(dv, args)`** - Lists action items");
      dv.span("- **`viewTagsApps(dv, args)`** - Lists applications");
      dv.span("- **`viewTagsDiscussions(dv, args)`** - Lists discussions");
      dv.span("- **`viewTagsProjects(dv, args)`** - Lists projects");
      dv.span("Use the following arguments to filter the tags");
      dv.span(
        "- **`searchTags`** - Filter tags by staring text (e.g. -- `{searchTags: '\"#ai\"'}`)"
      );
      dv.span(
        "- **`viewList`** - Include tags in list items/bullets (e.g. -- `{viewList: true}`"
      );
      dv.span(
        "- **`searchPath`** - Filter tasks by path (e.g. -- `{searchPath: '\"path/to/folder\"'}`)"
      );
      dv.span(
        "- **`viewHiddenFiles`** - Include hidden files in the search (e.g. -- `{viewHiddenFiles: true}`)"
      );
      dv.span("Use the following prefixes to filter the tags in `searchTags`");
      dv.span("- **`#ai/NAME`** - action item with `NAME`");
      dv.span("- **`#ap/APP`** - application `APP`");
      dv.span("- **`#d/NAME`** - discussion with `NAME`");
      dv.span("- **`#p/NAME`** - project `NAME`");
    };
    this.registerMarkdownCodeBlockProcessor("dash", (source, el, ctx2) => {
      console.log("dash", ctx2, "Hello");
      let cards = [
        {
          title: "Calendar",
          content: `
               [[Calendar Actions]] 
               [[Recent Updates]] 
               [[Priorities]] 
               [[Obsidian Notes]]`
        },
        {
          title: "Tasks",
          content: `
               [[Task Stages]] 
               [[Task Progression]] 
               [[Tasks Prioritized]] 
               [[Tasks Planning]] 
               [[Tasks Ideation]]
               [[Help Tasks]]`
        },
        {
          title: "Tags",
          content: `
               [[All Tags]] 
               [[Action Items]] 
               [[Applications]] 
               [[Discussions]] 
               [[Projects]]
               [[Help Tags]]`
        }
      ];
      const container = createEl("div", { cls: "obro-container" });
      cards.forEach((c) => {
        let t = "";
        c.content.split("\n").forEach((item) => {
          const l = item.trim().replace("[[", "").replace("]]", "");
          if (l) {
            t += `<a href="obsidian://open?file=${l.replace(/ /g, "%20")}.md">${l}</a><br>`;
          }
        });
        container.appendChild(dash.addCard(c.title, t));
      });
      el.appendChild(container);
    });
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
    console.error(`oBro ${this.manifest.version}: Settings are loaded!`, await this.settings);
  }
  async saveSettings() {
    await this.saveData(this.settings);
    console.error(`oBro ${this.manifest.version}: Settings are saved!`, this.settings);
  }
};
var oBroSettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    this.containerEl.empty();
    this.containerEl.createEl("h1", { text: "General Settings" });
    this.containerEl.createEl("b", { text: " " });
    this.containerEl.createEl("h2", { text: "Search Pages" });
    new import_obsidian.Setting(this.containerEl).setName("Search Path").setDesc("Enter a path relative to the vault or `.` for the current page only.").addText(
      (text) => text.setPlaceholder("Enter the path or leave blank for all.").setValue(this.plugin.settings.searchPath).onChange(async (value) => {
        this.plugin.settings.searchPath = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(this.containerEl).setName("View Hidden Pages").setDesc(
      "Include pages and subdirectories starting with `_`. These are usually hidden from view."
    ).addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.viewHiddenFiles).onChange(async (value) => {
        this.plugin.settings.viewHiddenFiles = value;
        await this.plugin.saveSettings();
      })
    );
    this.containerEl.createEl("b", { text: " " });
    this.containerEl.createEl("h2", { text: "Search Tags" });
    new import_obsidian.Setting(this.containerEl).setName("Search Tag").setDesc("Search for tasks starting with the tag. Leave blank for all tags.").addText(
      (text) => text.setPlaceholder("Enter the tag or leave blank for all.").setValue(this.plugin.settings.searchTag).onChange(async (value) => {
        this.plugin.settings.searchTag = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(this.containerEl).setName("View List").setDesc("Include bullets (list items) in the search. These are usually hidden from view.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.viewList).onChange(async (value) => {
        this.plugin.settings.viewList = value;
        await this.plugin.saveSettings();
      })
    );
    this.containerEl.createEl("b", { text: " " });
    this.containerEl.createEl("h2", { text: "Task Formatting" });
    new import_obsidian.Setting(this.containerEl).setName("Header Size").setDesc("Enter a size from 1 - 6.").addText(
      (text) => text.setPlaceholder("5").setValue("" + this.plugin.settings.taskHeaderSize).onChange(async (value) => {
        let parsed = parseInt(value);
        if (isNaN(parsed))
          return;
        if (parsed < 1 || parsed > 6)
          return;
        this.plugin.settings.taskHeaderSize = parsed;
        await this.plugin.saveSettings();
        tsks.headerSize = parsed;
      })
    );
  }
};
function isFileVisible(f, viewHiddenFiles) {
  try {
    if (viewHiddenFiles)
      return true;
    const pathParts = f.split("/");
    let i = pathParts.length - 1;
    while (i >= 0) {
      if (pathParts[i].startsWith("_"))
        return false;
      --i;
    }
    return true;
  } catch (err) {
    console.error("Error: ", err.message);
    return false;
  }
}
var ctx = {
  today: {},
  sow: {},
  eow: {},
  eonw: {},
  so4wa: {},
  searchTag: null,
  viewList: null,
  searchPath: null,
  viewHiddenFiles: null,
  headerSize: {},
  // add param to override today
  updateDates(dv) {
    const { DateTime } = dv.luxon;
    this.today = dv.date("today");
    this.sow = this.today.plus({ days: -(this.today.weekday % 7) });
    this.eow = this.sow.plus({ days: 7, milliseconds: -1 });
    this.eonw = this.eow.plus({ days: 7 });
    this.so4wa = this.sow.plus({ days: -28 });
  },
  updateCriteria(settings, dv, args) {
    this.searchTag = settings.searchTag;
    this.viewList = settings.viewList;
    this.searchPath = settings.searchPath;
    this.viewHiddenFiles = settings.viewHiddenFiles;
    this.headerSize = settings.taskHeaderSize;
    if (args) {
      if (args.searchTag)
        this.searchTag = args.searchTag;
      if (args.viewList)
        this.viewList = args.viewList;
      if (args.searchPath)
        this.searchPath = args.searchPath;
      if (args.viewHiddenFiles)
        this.viewHiddenFiles = args.viewHiddenFiles;
    }
  },
  getContext(settings, dv, args) {
    this.updateDates(dv);
    this.updateCriteria(settings, dv, args);
  }
};
var tsks = {
  getAllTs: 0,
  sortTs: 0,
  all: [],
  overdue: [],
  thisWeek: [],
  nextWeek: [],
  started: [],
  notPrioritized: [],
  completed: [],
  headerSize: 5,
  async getAll(dv, args) {
    this.all = [];
    this.getAllTs = null;
    console.log("pages", dv.pages(ctx.searchPath));
    try {
      if (ctx.searchPath == ".")
        this.all = await dv.current().file.tasks;
      else
        this.all = await dv.pages(ctx.searchPath).where((p) => isFileVisible(p.file.path, ctx.viewHiddenFiles)).file.tasks;
      this.getAllTs = Date.now();
    } catch (err) {
      console.error("oBro: tsks.getAll fail: ", err.message, ctx.searchPath);
    }
    return;
  },
  async sort(dv) {
    this.overdue = [];
    this.thisWeek = [];
    this.nextWeek = [];
    this.started = [];
    this.notPrioritized = [];
    this.completed = [];
    this.sortTs = null;
    try {
      for (let t of this.all) {
        if (t.completed) {
          if (ctx.so4wa <= t.completion)
            this.completed.push(t);
        } else if (!t.due) {
          if (t.start && t.start <= ctx.today)
            this.started.push(t);
          else {
            this.notPrioritized.push(t);
          }
        } else if (t.due && t.due < ctx.today)
          this.overdue.push(t);
        else if (ctx.sow <= t.due && t.due <= ctx.eow)
          this.thisWeek.push(t);
        else if (ctx.eow < t.due && t.due <= ctx.eonw)
          this.nextWeek.push(t);
        else if (t.start && t.start <= ctx.today)
          this.started.push(t);
      }
      this.overdue = dv.array(this.overdue);
      this.thisWeek = dv.array(this.thisWeek);
      this.nextWeek = dv.array(this.nextWeek);
      this.started = dv.array(this.started);
      this.notPrioritized = dv.array(this.notPrioritized);
      this.completed = dv.array(this.completed);
      this.sortTs = Date.now();
    } catch (err) {
      console.error("oBro: tsks.sort fail: ", err.message);
    }
    statusBar.children[0].setText(
      `Overdue:${this.overdue.length} This Week:${this.thisWeek.length}`
    );
    return;
  },
  async update(settings, dv, args) {
    tsks.headerSize = settings.taskHeaderSize;
    ctx.getContext(settings, dv, args);
    await this.getAll(dv, args);
    await this.sort(dv);
  },
  async show(dv, title, tasks) {
    if (!tasks || !tasks.length)
      return;
    await dv.header(this.headerSize, title + " (" + tasks.length + ")");
    await dv.taskList(tasks, false);
  }
};
var tags = {
  all: [],
  unique: [],
  tagTs: 0,
  headerSize: 5,
  async getAll(dv, args) {
    this.all = [];
    this.tagTs = null;
    console.log("ctx", ctx);
    try {
      if (ctx.searchPath == ".")
        this.all = await dv.current().file.lists;
      else
        this.all = await dv.pages(ctx.searchPath).where((p) => isFileVisible(p.file.path, ctx.viewHiddenFiles)).file.lists.where((t) => t.tags.length > 0);
      this.tagTs = Date.now();
    } catch (err) {
      console.error("oBro: tags.getAll fail: ", err.message);
    }
    let uniqueTags = Array.from(new Set(this.all.tags)).sort();
    console.log(`oBro: tagTs`, this.all, uniqueTags, Date.now() - this.tagTs);
    for (let t of uniqueTags) {
      await this.view(
        dv,
        t,
        this.all.where(
          (w) => w.tags.includes(t) && (w.task || ctx.viewList) && w.status != "x" && w.status != "-"
        )
      );
    }
  },
  async update(settings, dv, args) {
    ctx.getContext(settings, dv, args);
    console.log(`oBro: tags.update`, args, settings, ctx);
    await this.getAll(dv, args);
    console.log(`oBro: tags.update`, this.all);
  },
  async view(dv, title, tags2) {
    if (!tags2 || !tags2.length)
      return;
    await dv.header(this.headerSize, title + " (" + tags2.length + ")");
    await dv.taskList(tags2, false);
  }
};
var dash = {
  addCard(title, content) {
    const card = createEl("div", { cls: "obro-card" });
    card.appendChild(createEl("div", { text: title, cls: "obro-card-title" }));
    card.appendChild(createEl("div", { text: "" }));
    card.innerHTML += content;
    return card;
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiXCJ1c2Ugc3RyaWN0O1wiO1xyXG5cclxuaW1wb3J0IHsgY3JlYXRlIH0gZnJvbSBcImRvbWFpblwiO1xyXG5pbXBvcnQge1xyXG4gICBBcHAsXHJcbiAgIEVkaXRvcixcclxuICAgTWFya2Rvd25WaWV3LFxyXG4gICBNb2RhbCxcclxuICAgTm90aWNlLFxyXG4gICBQbHVnaW4sXHJcbiAgIFBsdWdpblNldHRpbmdUYWIsXHJcbiAgIFNldHRpbmcsXHJcbn0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IGdldEFQSSwgRGF0YXZpZXdBcGkgfSBmcm9tIFwib2JzaWRpYW4tZGF0YXZpZXdcIjtcclxuXHJcbmludGVyZmFjZSBvQnJvU2V0dGluZ3Mge1xyXG4gICBzZWFyY2hUYWc6IHN0cmluZztcclxuICAgdmlld0xpc3Q6IGJvb2xlYW47XHJcbiAgIHNlYXJjaFBhdGg6IHN0cmluZztcclxuICAgdmlld0hpZGRlbkZpbGVzOiBib29sZWFuO1xyXG4gICB0YXNrSGVhZGVyU2l6ZTogbnVtYmVyO1xyXG59XHJcblxyXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBvQnJvU2V0dGluZ3MgPSB7XHJcbiAgIHNlYXJjaFRhZzogXCJcIixcclxuICAgdmlld0xpc3Q6IGZhbHNlLFxyXG4gICBzZWFyY2hQYXRoOiBcIlwiLFxyXG4gICB2aWV3SGlkZGVuRmlsZXM6IGZhbHNlLFxyXG4gICB0YXNrSGVhZGVyU2l6ZTogNSxcclxufTtcclxuXHJcbmxldCBzdGF0dXNCYXI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBvQnJvIGV4dGVuZHMgUGx1Z2luIHtcclxuICAgc2V0dGluZ3M6IG9Ccm9TZXR0aW5ncztcclxuXHJcbiAgIGFzeW5jIG9ubG9hZCgpIHtcclxuICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoKCkgPT4ge1xyXG4gICAgICAgICAvLyBjaGVjayBpZiBkdiBwbHVnaW4gaXMgZW5hYmxlZFxyXG4gICAgICAgICBpZiAodGhpcy5hcHAucGx1Z2lucy5wbHVnaW5zW1wiZGF0YXZpZXdcIl0pIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYG9Ccm8gJHt0aGlzLm1hbmlmZXN0LnZlcnNpb259OiBEYXRhVmlldyBwbHVnaW4gaXMgcmVhZHkuYCk7XHJcbiAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYG9Ccm8gJHt0aGlzLm1hbmlmZXN0LnZlcnNpb259OiBEYXRhVmlldyBwbHVnaW4gbm90IGVuYWJsZWQuYCk7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIHN0YXR1c0JhciA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xyXG4gICAgICAgICBzdGF0dXNCYXIuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogXCJvQnJvJ3MgcmVhZHkhXCIgfSk7XHJcbiAgICAgICAgIHN0YXR1c0Jhci5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBcIlwiIH0pO1xyXG4gICAgICAgICBzdGF0dXNCYXIuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogXCJcIiB9KTtcclxuXHJcbiAgICAgICAgIC8vIFRPRE8gYWRkIHN0YXR1cyBmb3IgbGF0ZSBhbmQgdGhpcyB3ZWVrIHRhc2tzXHJcbiAgICAgICAgIC8vIG1ha2UgdGhlbSBsaW5rIHRvIHRoZSB0YXNrIGFuZCBhIG1vZGFsIHdpdGggdGhlIHRhc2sgZGV0YWlsc1xyXG4gICAgICAgICAvLyBjb25zdCBmcnVpdHMgPSB0aGlzLmFkZFN0YXR1c0Jhckl0ZW0oKTtcclxuICAgICAgICAgLy8gZnJ1aXRzLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IFwiXHVEODNDXHVERjRFXCIgfSk7XHJcbiAgICAgICAgIC8vIGZydWl0cy5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBcIlx1RDgzQ1x1REY0Q1wiIH0pO1xyXG5cclxuICAgICAgICAgLy8gY29uc3QgdmVnZ2llcyA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xyXG4gICAgICAgICAvLyB2ZWdnaWVzLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IFwiXHVEODNFXHVERDY2XCIgfSk7XHJcbiAgICAgICAgIC8vIHZlZ2dpZXMuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogXCJcdUQ4M0VcdURENkNcIiB9KTtcclxuXHJcbiAgICAgICAgIC8vIC8vIHJlZ2lzdGVyIGRhdGF2aWV3IGNvbW1hbmRcclxuICAgICAgICAgLy8gdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgICAgLy8gICAgIGlkOiAndmlldy1wYWdlcy1yZWNlbnQnLFxyXG4gICAgICAgICAvLyAgICAgbmFtZTogJ1ZpZXcgUGFnZXMgUmVjZW50JyxcclxuICAgICAgICAgLy8gICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgIC8vICAgICAgICAgdGhpcy5hcHAuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmQoXCJkYXRhdmlldzpydW4tcXVlcnlcIiwgeyBxdWVyeTogXCJ2aWV3UGFnZXNSZWNlbnRcIiB9KTtcclxuICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgLy8gfSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gV2FpdCBmb3IgT2JzaWRpYW4gdG8gYmUgZnVsbHkgbG9hZGVkXHJcbiAgICAgIGFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgIGNvbnNvbGUubG9nKCdvQnJvOiBcIkRPTUNvbnRlbnRMb2FkZWRcIiBldmVudCBoYXMgZmlyZWQhJyk7XHJcbiAgICAgICAgIC8vIEZ1bmN0aW9uIHRvIG1ha2UgaGVhZGVycyBzdGlja3lcclxuICAgICAgICAgZnVuY3Rpb24gbWFrZUhlYWRlcnNTdGlja3koKSB7XHJcbiAgICAgICAgICAgIC8vIEdldCBhbGwgaGVhZGVycyBpbiB0aGUgZG9jdW1lbnRcclxuICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcbiAgICAgICAgICAgICAgIFwiLm1hcmtkb3duLXByZXZpZXctc2VjdGlvbiBoMSwgLm1hcmtkb3duLXByZXZpZXctc2VjdGlvbiBoMiwgLm1hcmtkb3duLXByZXZpZXctc2VjdGlvbiBoM1wiXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBoZWFkZXJzLmZvckVhY2goaGVhZGVyID0+IHtcclxuICAgICAgICAgICAgICAgLy8gTWFrZSBoZWFkZXIgc3RpY2t5XHJcbiAgICAgICAgICAgICAgIGhlYWRlci5zdHlsZS5wb3NpdGlvbiA9IFwic3RpY2t5XCI7XHJcbiAgICAgICAgICAgICAgIGhlYWRlci5zdHlsZS50b3AgPSBcIjBcIjtcclxuICAgICAgICAgICAgICAgaGVhZGVyLnN0eWxlLnpJbmRleCA9IFwiMTAwMFwiO1xyXG4gICAgICAgICAgICAgICBoZWFkZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiOyAvLyBDaGFuZ2UgYXMgcGVyIHlvdXIgdGhlbWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIC8vIENhbGwgdGhlIGZ1bmN0aW9uIHRvIG1ha2UgaGVhZGVycyBzdGlja3lcclxuICAgICAgICAgbWFrZUhlYWRlcnNTdGlja3koKTtcclxuXHJcbiAgICAgICAgIC8vIFdoZW5ldmVyIHRoZSBjb250ZW50IG9mIHRoZSBub3RlIGNoYW5nZXMsIG1ha2UgaGVhZGVycyBzdGlja3kgYWdhaW5cclxuICAgICAgICAgd2luZG93Lm9ic2lkaWFuLnBsdWdpbnMuc3Vic2NyaWJlKFwiZWRpdG9yLXByZXZpZXdcIiwgbWFrZUhlYWRlcnNTdGlja3kpO1xyXG4gICAgICB9KTtcclxuIFxyXG4gICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IG9Ccm9TZXR0aW5nc1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cclxuICAgICAgd2luZG93LnZpZXdQYWdlc1JlY2VudCA9IGFzeW5jIChkdiwgYXJncykgPT4ge1xyXG4gICAgICAgICAvLyBUT0RPOiB1cGRhdGUgdG8gdXNlIGdsb2JhbCBkdiBpbnN0ZWFkIG9mIHBhc3NlZC4gTmVlZCB0byB1bmRlcnN0YW5kIHdoeSBjcmVhdGVFbCBlcnJvcnMgYXBwZWFyXHJcblxyXG4gICAgICAgICBpZiAod2luZG93LmFwcC5wbHVnaW5zLnBsdWdpbnMuZGF0YXZpZXcpIHtcclxuICAgICAgICAgICAgLy8gbGV0IGR2ID0gd2luZG93LmFwcC5wbHVnaW5zLnBsdWdpbnMuZGF0YXZpZXcuYXBpO1xyXG4gICAgICAgICAgICAvLyBsZXQgZHYyID0gZ2V0QVBJKHdpbmRvdy5hcHApO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImR2OiBcIiwgZHYsIGR2Mik7XHJcblxyXG4gICAgICAgICAgICBjdHguZ2V0Q29udGV4dCh0aGlzLnNldHRpbmdzLCBkdiwgYXJncyk7XHJcbiAgICAgICAgICAgIC8vIHN1cHByZXNzIHRoaXMgcGFnZSBvbmx5LCBpdCBpcyBub3QgYSB2YWxpZCByZXBvcnRcclxuICAgICAgICAgICAgaWYgKGN0eC5zZWFyY2hQYXRoID09IFwiLlwiKSBjdHguc2VhcmNoUGF0aCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGxldCBwID0gYXdhaXQgZHZcclxuICAgICAgICAgICAgICAgLnBhZ2VzKGN0eC5zZWFyY2hQYXRoID09IFwiLlwiID8gXCJcIiA6IGN0eC5zZWFyY2hQYXRoKVxyXG4gICAgICAgICAgICAgICAuc29ydCh0ID0+IC10LmZpbGUubXRpbWUudHMpO1xyXG4gICAgICAgICAgICBhd2FpdCBkdi50YWJsZShcclxuICAgICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgICAgICBcIkZpbGVcIixcclxuICAgICAgICAgICAgICAgICAgXCJUYXNrc1wiLFxyXG4gICAgICAgICAgICAgICAgICBcIkxhc3QgTW9kaWZpZWRcIixcclxuICAgICAgICAgICAgICAgICAgXCJTaXplXCIsXHJcbiAgICAgICAgICAgICAgICAgIFwiRm9sZGVyXCIsXHJcbiAgICAgICAgICAgICAgICAgIGN0eC52aWV3SGlkZGVuRmlsZXMgPyBcIlZpc2libGVcIiA6IFwiXCIsXHJcbiAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgIHBcclxuICAgICAgICAgICAgICAgICAgLndoZXJlKHAgPT4gaXNGaWxlVmlzaWJsZShwLmZpbGUucGF0aCwgY3R4LnZpZXdIaWRkZW5GaWxlcykpXHJcbiAgICAgICAgICAgICAgICAgIC5tYXAocCA9PiBbXHJcbiAgICAgICAgICAgICAgICAgICAgIHAuZmlsZS5saW5rLFxyXG4gICAgICAgICAgICAgICAgICAgICBwLmZpbGUudGFza3MubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICBwLmZpbGUubXRpbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgIHAuZmlsZS5zaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICBwLmZpbGUuZm9sZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICBjdHgudmlld0hpZGRlbkZpbGVzID8gaXNGaWxlVmlzaWJsZShwLmZpbGUucGF0aCkgOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICBdKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRGF0YVZpZXcgcGx1Z2luIGlzIG5vdCBlbmFibGVkXCIpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB3aW5kb3cuaGVscFBhZ2VzID0gYXN5bmMgKGR2LCBhcmdzKSA9PiB7XHJcbiAgICAgICAgIGR2LmhlYWRlcig1LCBcIlBhZ2UgTWFuYWdlbWVudFwiKTtcclxuICAgICAgICAgZHYuc3BhbihcIlRoZSBmb2xsb3dpbmcgY29tbWFuZHMgYXJlIGF2YWlsYWJsZSB0byBtYW5hZ2UgcGFnZXM6XCIpO1xyXG4gICAgICAgICBkdi5zcGFuKFwiLSAqKmB2aWV3UGFnZXNSZWNlbnQoZHYsIGFyZ3MpYCoqIC0gTGlzdHMgcGFnZXMgc29ydGVkIGJ5IGxhc3QgbW9kaWZpZWQgZGF0ZVwiKTtcclxuICAgICAgICAgZHYuc3BhbihcclxuICAgICAgICAgICAgXCJVc2UgdGhlIGZvbGxvd2luZyBhcmd1bWVudHMgdG8gZmlsdGVyIHRoZSBwYWdlczogX3NlYXJjaFBhdGhfLCBfdmlld0hpZGRlbkZpbGVzX1wiXHJcbiAgICAgICAgICk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB3aW5kb3cudmlld1Rhc2tTdGFnZXMgPSBhc3luYyAoZHYsIGFyZ3MpID0+IHtcclxuICAgICAgICAgYXdhaXQgdHNrcy51cGRhdGUodGhpcy5zZXR0aW5ncywgZHYsIGFyZ3MpO1xyXG4gICAgICAgICBsZXQgbWQgPSBhd2FpdCBkdi5tYXJrZG93blRhYmxlKFxyXG4gICAgICAgICAgICBbXCJTdGFnZVwiLCBcIlF0eVwiXSxcclxuICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgICBbXCJPdmVyZHVlXCIsIHRza3Mub3ZlcmR1ZS5sZW5ndGhdLFxyXG4gICAgICAgICAgICAgICBbXCJUaGlzIFdlZWtcIiwgdHNrcy50aGlzV2Vlay5sZW5ndGhdLFxyXG4gICAgICAgICAgICAgICBbXCJOZXh0IFdlZWtcIiwgdHNrcy5uZXh0V2Vlay5sZW5ndGhdLFxyXG4gICAgICAgICAgICAgICBbXCJTdGFydGVkXCIsIHRza3Muc3RhcnRlZC5sZW5ndGhdLFxyXG4gICAgICAgICAgICAgICBbXCJCYWNrbG9nXCIsIHRza3Mubm90UHJpb3JpdGl6ZWQubGVuZ3RoXSxcclxuICAgICAgICAgICAgICAgW1wiQ29tcGxldGVkXCIsIHRza3MuY29tcGxldGVkLmxlbmd0aF0sXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICAgKTtcclxuICAgICAgICAgYXdhaXQgZHYuc3BhbihtZCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB3aW5kb3cudmlld1Rhc2tQcm9ncmVzc2lvbiA9IGFzeW5jIChkdiwgYXJncykgPT4ge1xyXG4gICAgICAgICBhd2FpdCB0c2tzLnVwZGF0ZSh0aGlzLnNldHRpbmdzLCBkdiwgYXJncyk7XHJcbiAgICAgICAgIGxldCBtZCA9IGF3YWl0IGR2Lm1hcmtkb3duVGFibGUoXHJcbiAgICAgICAgICAgIFtcIkluIFByb2dyZXNzXCIsIFwiQmFja2xvZ1wiLCBcIkNvbXBsZXRlZFwiLCBcIlRvdGFsXCJdLFxyXG4gICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICAgICAgdHNrcy5vdmVyZHVlLmxlbmd0aCArXHJcbiAgICAgICAgICAgICAgICAgICAgIHRza3MudGhpc1dlZWsubGVuZ3RoICtcclxuICAgICAgICAgICAgICAgICAgICAgdHNrcy5uZXh0V2Vlay5sZW5ndGggK1xyXG4gICAgICAgICAgICAgICAgICAgICB0c2tzLnN0YXJ0ZWQubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICB0c2tzLm5vdFByaW9yaXRpemVkLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgdHNrcy5jb21wbGV0ZWQubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICB0c2tzLm92ZXJkdWUubGVuZ3RoICtcclxuICAgICAgICAgICAgICAgICAgICAgdHNrcy50aGlzV2Vlay5sZW5ndGggK1xyXG4gICAgICAgICAgICAgICAgICAgICB0c2tzLm5leHRXZWVrLmxlbmd0aCArXHJcbiAgICAgICAgICAgICAgICAgICAgIHRza3Muc3RhcnRlZC5sZW5ndGggK1xyXG4gICAgICAgICAgICAgICAgICAgICB0c2tzLm5vdFByaW9yaXRpemVkLmxlbmd0aCArXHJcbiAgICAgICAgICAgICAgICAgICAgIHRza3MuY29tcGxldGVkLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgICApO1xyXG4gICAgICAgICBhd2FpdCBkdi5zcGFuKG1kKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHdpbmRvdy52aWV3VGFza3NQcmlvcml0aXplZCA9IGFzeW5jIChkdiwgYXJncykgPT4ge1xyXG4gICAgICAgICBhd2FpdCB0c2tzLnVwZGF0ZSh0aGlzLnNldHRpbmdzLCBkdiwgYXJncyk7XHJcbiAgICAgICAgIGF3YWl0IHRza3Muc2hvdyhcclxuICAgICAgICAgICAgZHYsXHJcbiAgICAgICAgICAgIFwiT3ZlcmR1ZVwiLFxyXG4gICAgICAgICAgICB0c2tzLm92ZXJkdWUuc29ydChzID0+IHMuZHVlLCBcImRlc2NcIilcclxuICAgICAgICAgKTtcclxuICAgICAgICAgYXdhaXQgdHNrcy5zaG93KFxyXG4gICAgICAgICAgICBkdixcclxuICAgICAgICAgICAgXCJUaGlzIFdlZWtcIixcclxuICAgICAgICAgICAgdHNrcy50aGlzV2Vlay5zb3J0KHMgPT4gcy5kdWUsIFwiYXNjXCIpXHJcbiAgICAgICAgICk7XHJcbiAgICAgICAgIGF3YWl0IHRza3Muc2hvdyhcclxuICAgICAgICAgICAgZHYsXHJcbiAgICAgICAgICAgIFwiTmV4dCBXZWVrXCIsXHJcbiAgICAgICAgICAgIHRza3MubmV4dFdlZWsuc29ydChzID0+IHMuZHVlLCBcImFzY1wiKVxyXG4gICAgICAgICApO1xyXG4gICAgICAgICBhd2FpdCB0c2tzLnNob3coXHJcbiAgICAgICAgICAgIGR2LFxyXG4gICAgICAgICAgICBcIkluIFByb2dyZXNzXCIsXHJcbiAgICAgICAgICAgIHRza3Muc3RhcnRlZC5zb3J0KHMgPT4gcy5zdGFydCwgXCJhc2NcIilcclxuICAgICAgICAgKTtcclxuICAgICAgICAgYXdhaXQgdHNrcy5zaG93KFxyXG4gICAgICAgICAgICBkdixcclxuICAgICAgICAgICAgXCJDb21wbGV0ZWQgUmVjZW50bHlcIixcclxuICAgICAgICAgICAgdHNrcy5jb21wbGV0ZWQud2hlcmUodyA9PiB3LmNvbXBsZXRpb24gPj0gY3R4LnNvNHdhKS5zb3J0KHMgPT4gcy5jb21wbGV0aW9uLCBcImFzY1wiKVxyXG4gICAgICAgICApO1xyXG4gICAgICAgICBhd2FpdCB0c2tzLnNob3coXHJcbiAgICAgICAgICAgIGR2LFxyXG4gICAgICAgICAgICBcIkNhbmNlbGxlZFwiLFxyXG4gICAgICAgICAgICB0c2tzLm5vdFByaW9yaXRpemVkLndoZXJlKHcgPT4gdy52aWV3U3RhdHVzID09IFwiLVwiKVxyXG4gICAgICAgICApO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgd2luZG93LnZpZXdUYXNrc1BsYW5uaW5nID0gYXN5bmMgKGR2LCBhcmdzKSA9PiB7XHJcbiAgICAgICAgIGF3YWl0IHRza3MudXBkYXRlKHRoaXMuc2V0dGluZ3MsIGR2LCBhcmdzKTtcclxuICAgICAgICAgYXdhaXQgdHNrcy5zaG93KFxyXG4gICAgICAgICAgICBkdixcclxuICAgICAgICAgICAgXCJQcmlvcml0aXplXCIsXHJcbiAgICAgICAgICAgIHRza3Mubm90UHJpb3JpdGl6ZWQud2hlcmUodCA9PiB0LnN0YXR1cyA9PSBcIiFcIikuc29ydChzID0+IHMuZHVlLCBcImFzY1wiKVxyXG4gICAgICAgICApO1xyXG4gICAgICAgICBhd2FpdCB0c2tzLnNob3coXHJcbiAgICAgICAgICAgIGR2LFxyXG4gICAgICAgICAgICBcIk9wZW4gUXVlc3Rpb25zXCIsXHJcbiAgICAgICAgICAgIHRza3Mubm90UHJpb3JpdGl6ZWQud2hlcmUodCA9PiB0LnN0YXR1cyA9PSBcIj9cIikuc29ydChzID0+IHMuZHVlLCBcImFzY1wiKVxyXG4gICAgICAgICApO1xyXG4gICAgICAgICBhd2FpdCB0c2tzLnNob3coXHJcbiAgICAgICAgICAgIGR2LFxyXG4gICAgICAgICAgICBcIlNjaGVkdWxlXCIsXHJcbiAgICAgICAgICAgIHRza3Mubm90UHJpb3JpdGl6ZWQud2hlcmUodCA9PiB0LnN0YXR1cyA9PSBcIj5cIikuc29ydChzID0+IHMuZHVlLCBcImFzY1wiKVxyXG4gICAgICAgICApO1xyXG4gICAgICAgICBhd2FpdCB0c2tzLnNob3coXHJcbiAgICAgICAgICAgIGR2LFxyXG4gICAgICAgICAgICBcIlJldmlld1wiLFxyXG4gICAgICAgICAgICB0c2tzLm5vdFByaW9yaXRpemVkLndoZXJlKHQgPT4gdC5zdGF0dXMgPT0gXCJSXCIpLnNvcnQocyA9PiBzLmR1ZSwgXCJhc2NcIilcclxuICAgICAgICAgKTtcclxuICAgICAgICAgYXdhaXQgdHNrcy5zaG93KFxyXG4gICAgICAgICAgICBkdixcclxuICAgICAgICAgICAgXCJCYWNrbG9nXCIsXHJcbiAgICAgICAgICAgIHRza3Mubm90UHJpb3JpdGl6ZWQud2hlcmUodCA9PiB0LnN0YXR1cyA9PSBcIiBcIikuc29ydChzID0+IHMuZHVlLCBcImFzY1wiKVxyXG4gICAgICAgICApO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgd2luZG93LnZpZXdUYXNrc0lkZWF0aW9uID0gYXN5bmMgKGR2LCBhcmdzKSA9PiB7XHJcbiAgICAgICAgIGF3YWl0IHRza3MudXBkYXRlKHRoaXMuc2V0dGluZ3MsIGR2LCBhcmdzKTtcclxuICAgICAgICAgYXdhaXQgdHNrcy5zaG93KFxyXG4gICAgICAgICAgICBkdixcclxuICAgICAgICAgICAgXCJJZGVhc1wiLFxyXG4gICAgICAgICAgICB0c2tzLm5vdFByaW9yaXRpemVkLndoZXJlKHQgPT4gdC5zdGF0dXMgPT0gXCJpXCIpLnNvcnQocyA9PiBzLmR1ZSwgXCJhc2NcIilcclxuICAgICAgICAgKTtcclxuICAgICAgICAgYXdhaXQgdHNrcy5zaG93KFxyXG4gICAgICAgICAgICBkdixcclxuICAgICAgICAgICAgXCJCb29rbWFya3NcIixcclxuICAgICAgICAgICAgdHNrcy5ub3RQcmlvcml0aXplZC53aGVyZSh0ID0+IHQuc3RhdHVzID09IFwiYlwiKS5zb3J0KHMgPT4gcy5kdWUsIFwiYXNjXCIpXHJcbiAgICAgICAgICk7XHJcbiAgICAgICAgIGF3YWl0IHRza3Muc2hvdyhcclxuICAgICAgICAgICAgZHYsXHJcbiAgICAgICAgICAgIFwiUHJvc1wiLFxyXG4gICAgICAgICAgICB0c2tzLm5vdFByaW9yaXRpemVkLndoZXJlKHQgPT4gdC5zdGF0dXMgPT0gXCJwXCIpLnNvcnQocyA9PiBzLmR1ZSwgXCJhc2NcIilcclxuICAgICAgICAgKTtcclxuICAgICAgICAgYXdhaXQgdHNrcy5zaG93KFxyXG4gICAgICAgICAgICBkdixcclxuICAgICAgICAgICAgXCJDb25zXCIsXHJcbiAgICAgICAgICAgIHRza3Mubm90UHJpb3JpdGl6ZWQud2hlcmUodCA9PiB0LnN0YXR1cyA9PSBcImNcIikuc29ydChzID0+IHMuZHVlLCBcImFzY1wiKVxyXG4gICAgICAgICApO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gaW5mbyBhYm91dCB1c2luZyB0aGUgdGFzayB0b29sc1xyXG4gICAgICB3aW5kb3cuaGVscFRhc2tzID0gYXN5bmMgKGR2LCBhcmdzKSA9PiB7XHJcbiAgICAgICAgIGR2LmhlYWRlcih0c2tzLmhlYWRlclNpemUsIFwiVGFzayBNYW5hZ2VtZW50XCIpO1xyXG4gICAgICAgICBkdi5zcGFuKFwiIyMjIyMjIFRoZSBmb2xsb3dpbmcgY29tbWFuZHMgYXJlIGF2YWlsYWJsZSB0byBtYW5hZ2UgdGFza3NcIik7XHJcbiAgICAgICAgIGR2LnNwYW4oXCItICoqYHZpZXdQYWdlc1JlY2VudChkdiwgYXJncylgKiogLSBMaXN0cyBwYWdlcyBzb3J0ZWQgYnkgbGFzdCBtb2RpZmllZCBkYXRlXCIpO1xyXG4gICAgICAgICBkdi5zcGFuKFwiLSAqKmB2aWV3VGFza1N0YWdlcyhkdiwgYXJncylgKiogLSBTaG93cyB0YXNrIHN0YWdlcyBhbmQgcXVhbnRpdGllc1wiKTtcclxuICAgICAgICAgZHYuc3BhbihcIi0gKipgdmlld1Rhc2tQcm9ncmVzc2lvbihkdiwgYXJncylgKiogLSBTaG93cyBvdmVyYWxsIHRhc2sgcHJvZ3Jlc3Npb25cIik7XHJcbiAgICAgICAgIGR2LnNwYW4oXCItICoqYHZpZXdUYXNrc1ByaW9yaXRpemVkKGR2LCBhcmdzKWAqKiAtIFNob3dzIHByaW9yaXRpemVkIHRhc2tzIGJ5IHN0YXR1c1wiKTtcclxuICAgICAgICAgZHYuc3BhbihcIi0gKipgdmlld1Rhc2tzUGxhbm5pbmcoZHYsIGFyZ3MpYCoqIC0gU2hvd3MgdGFza3MgcmVhZHkgZm9yIHBsYW5uaW5nXCIpO1xyXG4gICAgICAgICBkdi5zcGFuKFwiLSAqKmB2aWV3VGFza3NJZGVhdGlvbihkdiwgYXJncylgKiogLSBTaG93cyB0YXNrcyBuZWVkaW5nIGlkZWF0aW9uXCIpO1xyXG5cclxuICAgICAgICAgZHYuc3BhbihcIlVzZSB0aGUgZm9sbG93aW5nIGFyZ3VtZW50cyB0byBmaWx0ZXIgdGhlIHRhc2tzXCIpO1xyXG4gICAgICAgICBkdi5zcGFuKFxyXG4gICAgICAgICAgICBcIi0gKipgc2VhcmNoUGF0aGAqKiAtIEZpbHRlciB0YXNrcyBieSBwYXRoIChlLmcuIC0tIGB7c2VhcmNoUGF0aDogJ1xcXCJwYXRoL3RvL2ZvbGRlclxcXCInfWApXCJcclxuICAgICAgICAgKTtcclxuICAgICAgICAgZHYuc3BhbihcclxuICAgICAgICAgICAgXCItICoqYHZpZXdIaWRkZW5GaWxlc2AqKiAtIEluY2x1ZGUgaGlkZGVuIGZpbGVzIGluIHRoZSBzZWFyY2ggKGUuZy4gLS0gYHt2aWV3SGlkZGVuRmlsZXM6IHRydWV9YClcIlxyXG4gICAgICAgICApO1xyXG5cclxuICAgICAgICAgZHYuc3BhbihcIiMjIyMjIyBUYXNrIG5vdGF0aW9uc1wiKTtcclxuICAgICAgICAgZHYuc3BhbihcIioqVGFzayBTdGF0dXMqKlwiKTtcclxuICAgICAgICAgZHYuc3BhbihcIi0gWyBdIHRvLWRvIFsgXVwiKTtcclxuICAgICAgICAgZHYuc3BhbihcIi0gWy9dIGluIHByb2Nlc3MgWy9dXCIpO1xyXG4gICAgICAgICBkdi5zcGFuKFwiLSBbeF0gY29tcGxldGVkIFt4XVwiKTtcclxuICAgICAgICAgZHYuc3BhbihcIi0gWy1dIGNhbmNlbGxlZCBbLV1cIik7XHJcblxyXG4gICAgICAgICBkdi5zcGFuKFwiKipQbGFubmluZyAmIE9yZ2FuaXphdGlvbioqXCIpO1xyXG4gICAgICAgICBkdi5zcGFuKFwiLSBbIV0gcHJpb3JpdHkgWyFdXCIpO1xyXG4gICAgICAgICBkdi5zcGFuKFwiLSBbP10gcXVlc3Rpb24gWz9dXCIpO1xyXG4gICAgICAgICBkdi5zcGFuKFwiLSBbPl0gc2NoZWR1bGUgWz5dXCIpO1xyXG4gICAgICAgICBkdi5zcGFuKFwiLSBbUl0gcmV2aWV3IFtSXVwiKTtcclxuXHJcbiAgICAgICAgIGR2LnNwYW4oXCIqKklkZWF0aW9uICYgUmVmZXJlbmNlKipcIik7XHJcbiAgICAgICAgIGR2LnNwYW4oXCItIFtpXSBpZGVhIFtpXVwiKTtcclxuICAgICAgICAgZHYuc3BhbihcIi0gW2JdIGJvb2ttYXJrIFtiXVwiKTtcclxuICAgICAgICAgZHYuc3BhbihcIi0gW3BdIHBybyBbcF1cIik7XHJcbiAgICAgICAgIGR2LnNwYW4oXCItIFtjXSBjb24gW2NdXCIpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgd2luZG93LnZpZXdUYWdzID0gYXN5bmMgKGR2LCBhcmdzKSA9PiB7XHJcbiAgICAgICAgIHRhZ3MudXBkYXRlKHRoaXMuc2V0dGluZ3MsIGR2LCBhcmdzKTtcclxuICAgICAgICAgdGFncy52aWV3KGR2LCBcIkFsbCBUYWdzXCIsIHRhZ3MuYWxsKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHdpbmRvdy52aWV3VGFnc0FJcyA9IGFzeW5jIChkdiwgYXJncykgPT4ge1xyXG4gICAgICAgICB0YWdzLnVwZGF0ZSh0aGlzLnNldHRpbmdzLCBkdiwgYXJncyk7XHJcbiAgICAgICAgIHRhZ3MudmlldyhcclxuICAgICAgICAgICAgZHYsXHJcbiAgICAgICAgICAgIFwiQWN0aW9uIEl0ZW1zXCIsXHJcbiAgICAgICAgICAgIHRhZ3MuYWxsLndoZXJlKHcgPT4gdy50YWdzLnN0YXJ0c1dpdGgoXCIjYWkvXCIpKVxyXG4gICAgICAgICApO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgd2luZG93LnZpZXdUYWdzQXBwcyA9IGFzeW5jIChkdiwgYXJncykgPT4ge1xyXG4gICAgICAgICB0YWdzLnVwZGF0ZSh0aGlzLnNldHRpbmdzLCBkdiwgYXJncyk7XHJcbiAgICAgICAgIHRhZ3MudmlldyhcclxuICAgICAgICAgICAgZHYsXHJcbiAgICAgICAgICAgIFwiQXBwbGljYXRpb25zXCIsXHJcbiAgICAgICAgICAgIHRhZ3MuYWxsLndoZXJlKHcgPT4gdy50YWdzLnN0YXJ0c1dpdGgoXCIjYXAvXCIpKVxyXG4gICAgICAgICApO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgd2luZG93LnZpZXdUYWdzRGlzY3Vzc2lvbnMgPSBhc3luYyAoZHYsIGFyZ3MpID0+IHtcclxuICAgICAgICAgdGFncy51cGRhdGUodGhpcy5zZXR0aW5ncywgZHYsIGFyZ3MpO1xyXG4gICAgICAgICB0YWdzLnZpZXcoXHJcbiAgICAgICAgICAgIGR2LFxyXG4gICAgICAgICAgICBcIkRpc2N1c3Npb25zXCIsXHJcbiAgICAgICAgICAgIHRhZ3MuYWxsLndoZXJlKHcgPT4gdy50YWdzLnN0YXJ0c1dpdGgoXCIjZC9cIikpXHJcbiAgICAgICAgICk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB3aW5kb3cudmlld1RhZ3NQcm9qZWN0cyA9IGFzeW5jIChkdiwgYXJncykgPT4ge1xyXG4gICAgICAgICB0YWdzLnVwZGF0ZSh0aGlzLnNldHRpbmdzLCBkdiwgYXJncyk7XHJcbiAgICAgICAgIHRhZ3MudmlldyhcclxuICAgICAgICAgICAgZHYsXHJcbiAgICAgICAgICAgIFwiUHJvamVjdHNcIixcclxuICAgICAgICAgICAgdGFncy5hbGwud2hlcmUodyA9PiB3LnRhZ3Muc3RhcnRzV2l0aChcIiNwL1wiKSlcclxuICAgICAgICAgKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHdpbmRvdy5oZWxwVGFncyA9IGFzeW5jIChkdiwgYXJncykgPT4ge1xyXG4gICAgICAgICBkdi5oZWFkZXIodHNrcy5oZWFkZXJTaXplLCBcIlRhZyBNYW5hZ2VtZW50XCIpO1xyXG4gICAgICAgICBkdi5zcGFuKFwiVGhlIGZvbGxvd2luZyBjb21tYW5kcyBhcmUgYXZhaWxhYmxlIHRvIG1hbmFnZSB0YWdzOlwiKTtcclxuICAgICAgICAgZHYuc3BhbihcIi0gKipgdmlld1RhZ3MoZHYsIGFyZ3MpYCoqIC0gTGlzdHMgdGFncyBzb3J0ZWQgaW4gYWxwaGFiZXRpY2FsIG9yZGVyXCIpO1xyXG4gICAgICAgICBkdi5zcGFuKFwiLSAqKmB2aWV3VGFnc0FJcyhkdiwgYXJncylgKiogLSBMaXN0cyBhY3Rpb24gaXRlbXNcIik7XHJcbiAgICAgICAgIGR2LnNwYW4oXCItICoqYHZpZXdUYWdzQXBwcyhkdiwgYXJncylgKiogLSBMaXN0cyBhcHBsaWNhdGlvbnNcIik7XHJcbiAgICAgICAgIGR2LnNwYW4oXCItICoqYHZpZXdUYWdzRGlzY3Vzc2lvbnMoZHYsIGFyZ3MpYCoqIC0gTGlzdHMgZGlzY3Vzc2lvbnNcIik7XHJcbiAgICAgICAgIGR2LnNwYW4oXCItICoqYHZpZXdUYWdzUHJvamVjdHMoZHYsIGFyZ3MpYCoqIC0gTGlzdHMgcHJvamVjdHNcIik7XHJcblxyXG4gICAgICAgICBkdi5zcGFuKFwiVXNlIHRoZSBmb2xsb3dpbmcgYXJndW1lbnRzIHRvIGZpbHRlciB0aGUgdGFnc1wiKTtcclxuICAgICAgICAgZHYuc3BhbihcclxuICAgICAgICAgICAgXCItICoqYHNlYXJjaFRhZ3NgKiogLSBGaWx0ZXIgdGFncyBieSBzdGFyaW5nIHRleHQgKGUuZy4gLS0gYHtzZWFyY2hUYWdzOiAnXFxcIiNhaVxcXCInfWApXCJcclxuICAgICAgICAgKTtcclxuICAgICAgICAgZHYuc3BhbihcclxuICAgICAgICAgICAgXCItICoqYHZpZXdMaXN0YCoqIC0gSW5jbHVkZSB0YWdzIGluIGxpc3QgaXRlbXMvYnVsbGV0cyAoZS5nLiAtLSBge3ZpZXdMaXN0OiB0cnVlfWBcIlxyXG4gICAgICAgICApO1xyXG4gICAgICAgICBkdi5zcGFuKFxyXG4gICAgICAgICAgICBcIi0gKipgc2VhcmNoUGF0aGAqKiAtIEZpbHRlciB0YXNrcyBieSBwYXRoIChlLmcuIC0tIGB7c2VhcmNoUGF0aDogJ1xcXCJwYXRoL3RvL2ZvbGRlclxcXCInfWApXCJcclxuICAgICAgICAgKTtcclxuICAgICAgICAgZHYuc3BhbihcclxuICAgICAgICAgICAgXCItICoqYHZpZXdIaWRkZW5GaWxlc2AqKiAtIEluY2x1ZGUgaGlkZGVuIGZpbGVzIGluIHRoZSBzZWFyY2ggKGUuZy4gLS0gYHt2aWV3SGlkZGVuRmlsZXM6IHRydWV9YClcIlxyXG4gICAgICAgICApO1xyXG5cclxuICAgICAgICAgZHYuc3BhbihcIlVzZSB0aGUgZm9sbG93aW5nIHByZWZpeGVzIHRvIGZpbHRlciB0aGUgdGFncyBpbiBgc2VhcmNoVGFnc2BcIik7XHJcbiAgICAgICAgIGR2LnNwYW4oXCItICoqYCNhaS9OQU1FYCoqIC0gYWN0aW9uIGl0ZW0gd2l0aCBgTkFNRWBcIik7XHJcbiAgICAgICAgIGR2LnNwYW4oXCItICoqYCNhcC9BUFBgKiogLSBhcHBsaWNhdGlvbiBgQVBQYFwiKTtcclxuICAgICAgICAgZHYuc3BhbihcIi0gKipgI2QvTkFNRWAqKiAtIGRpc2N1c3Npb24gd2l0aCBgTkFNRWBcIik7XHJcbiAgICAgICAgIGR2LnNwYW4oXCItICoqYCNwL05BTUVgKiogLSBwcm9qZWN0IGBOQU1FYFwiKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHRoaXMucmVnaXN0ZXJNYXJrZG93bkNvZGVCbG9ja1Byb2Nlc3NvcihcImRhc2hcIiwgKHNvdXJjZSwgZWwsIGN0eCkgPT4ge1xyXG4gICAgICAgICBjb25zb2xlLmxvZyhcImRhc2hcIiwgY3R4LCBcIkhlbGxvXCIpO1xyXG4gICAgICAgICBsZXQgY2FyZHMgPSBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgdGl0bGU6IFwiQ2FsZW5kYXJcIixcclxuICAgICAgICAgICAgICAgY29udGVudDogYFxyXG4gICAgICAgICAgICAgICBbW0NhbGVuZGFyIEFjdGlvbnNdXSBcclxuICAgICAgICAgICAgICAgW1tSZWNlbnQgVXBkYXRlc11dIFxyXG4gICAgICAgICAgICAgICBbW1ByaW9yaXRpZXNdXSBcclxuICAgICAgICAgICAgICAgW1tPYnNpZGlhbiBOb3Rlc11dYCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICB0aXRsZTogXCJUYXNrc1wiLFxyXG4gICAgICAgICAgICAgICBjb250ZW50OiBgXHJcbiAgICAgICAgICAgICAgIFtbVGFzayBTdGFnZXNdXSBcclxuICAgICAgICAgICAgICAgW1tUYXNrIFByb2dyZXNzaW9uXV0gXHJcbiAgICAgICAgICAgICAgIFtbVGFza3MgUHJpb3JpdGl6ZWRdXSBcclxuICAgICAgICAgICAgICAgW1tUYXNrcyBQbGFubmluZ11dIFxyXG4gICAgICAgICAgICAgICBbW1Rhc2tzIElkZWF0aW9uXV1cclxuICAgICAgICAgICAgICAgW1tIZWxwIFRhc2tzXV1gLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgIHRpdGxlOiBcIlRhZ3NcIixcclxuICAgICAgICAgICAgICAgY29udGVudDogYFxyXG4gICAgICAgICAgICAgICBbW0FsbCBUYWdzXV0gXHJcbiAgICAgICAgICAgICAgIFtbQWN0aW9uIEl0ZW1zXV0gXHJcbiAgICAgICAgICAgICAgIFtbQXBwbGljYXRpb25zXV0gXHJcbiAgICAgICAgICAgICAgIFtbRGlzY3Vzc2lvbnNdXSBcclxuICAgICAgICAgICAgICAgW1tQcm9qZWN0c11dXHJcbiAgICAgICAgICAgICAgIFtbSGVscCBUYWdzXV1gLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICBdO1xyXG4gICAgICAgICBjb25zdCBjb250YWluZXIgPSBjcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJvYnJvLWNvbnRhaW5lclwiIH0pO1xyXG4gICAgICAgICBjYXJkcy5mb3JFYWNoKGMgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGMuY29udGVudC5zcGxpdChcIlxcblwiKS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICBjb25zdCBsID0gaXRlbS50cmltKCkucmVwbGFjZShcIltbXCIsIFwiXCIpLnJlcGxhY2UoXCJdXVwiLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgaWYgKGwpIHtcclxuICAgICAgICAgICAgICAgICAgdCArPSBgPGEgaHJlZj1cIm9ic2lkaWFuOi8vb3Blbj9maWxlPSR7bC5yZXBsYWNlKC8gL2csIFwiJTIwXCIpfS5tZFwiPiR7bH08L2E+PGJyPmA7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkYXNoLmFkZENhcmQoYy50aXRsZSwgdCkpO1xyXG4gICAgICAgICB9KTtcclxuICAgICAgICAgZWwuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcclxuICAgICAgICAgLy8gY29uc3QgY29udGFpbmVyID0gY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwib2Jyby1jb250YWluZXJcIiB9KTtcclxuICAgICAgICAgLy8gY2FyZHMuZm9yRWFjaChjID0+IHtcclxuICAgICAgICAgLy8gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGRhc2guYWRkQ2FyZChjLnRpdGxlLCBjLmNvbnRlbnQpKTtcclxuICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgIC8vIGVsLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gKHdpbmRvdy5hZGRNZW1vRmllbGRzID0gKG1lbW9UaXRsZSwgbWVtb0NvbnRlbnQpID0+IHtcclxuICAgICAgLy8gICAgY29uc3QgZWRpdG9yID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWYudmlldy5zb3VyY2VNb2RlLmNtRWRpdG9yO1xyXG5cclxuICAgICAgLy8gICAgLy8gR2VuZXJhdGUgY3VycmVudCBkYXRlIGluIFlZWVktTU0tREQgZm9ybWF0XHJcbiAgICAgIC8vICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXTtcclxuXHJcbiAgICAgIC8vICAgIC8vIE1hcmtkb3duIHRlbXBsYXRlIGZvciBtZW1vIGZpZWxkc1xyXG4gICAgICAvLyAgICBjb25zdCBtZW1vRmllbGRzTWFya2Rvd24gPSBgXHJcbiAgICAgIC8vICAgICAgICBcXG4jIyBNZW1vOiAke21lbW9UaXRsZX1cclxuICAgICAgLy8gICAgICAgIFxcbi0gKipEYXRlOioqICR7Y3VycmVudERhdGV9XHJcbiAgICAgIC8vICAgICAgICBcXG4tICoqQ29udGVudDoqKiAke21lbW9Db250ZW50fVxyXG4gICAgICAvLyAgICAgICAgXFxuYDtcclxuXHJcbiAgICAgIC8vICAgIC8vIEluc2VydCBtZW1vIGZpZWxkcyBpbnRvIHRoZSBkb2N1bWVudFxyXG4gICAgICAvLyAgICBlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihtZW1vRmllbGRzTWFya2Rvd24pO1xyXG4gICAgICAvLyB9KSxcclxuICAgICAgLy8gICAgLy8gTkVFRCBUTyBNQUtFIFRISVMgVVNFRlVMXHJcbiAgICAgIC8vICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgIC8vICAgICAgIGlkOiBcImFkZC1tZW1vLWZpZWxkc1wiLFxyXG4gICAgICAvLyAgICAgICBuYW1lOiBcIkFkZCBNZW1vIEZpZWxkc1wiLFxyXG4gICAgICAvLyAgICAgICBob3RrZXlzOiBbeyBtb2RpZmllcnM6IFtcIk1vZFwiLCBcIlNoaWZ0XCJdLCBrZXk6IFwib1wiIH1dLFxyXG4gICAgICAvLyAgICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yKSA9PiB7XHJcbiAgICAgIC8vICAgICAgICAgIHdpbmRvdy5hZGRNZW1vRmllbGRzKFwiVGVzdCBNZW1vXCIsIFwiQmxhaCwgQmxhaCwgQmxhaFwiKTtcclxuICAgICAgLy8gICAgICAgfSxcclxuICAgICAgLy8gICAgfSk7XHJcbiAgIH1cclxuXHJcbiAgIG9udW5sb2FkKCkge1xyXG4gICAgICAvLyBUT0RPOiBhZGQgdW5sb2FkIGNvZGVcclxuICAgfVxyXG5cclxuICAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG4gICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuICAgICAgY29uc29sZS5lcnJvcihgb0JybyAke3RoaXMubWFuaWZlc3QudmVyc2lvbn06IFNldHRpbmdzIGFyZSBsb2FkZWQhYCwgYXdhaXQgdGhpcy5zZXR0aW5ncyk7XHJcbiAgIH1cclxuXHJcbiAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuICAgICAgY29uc29sZS5lcnJvcihgb0JybyAke3RoaXMubWFuaWZlc3QudmVyc2lvbn06IFNldHRpbmdzIGFyZSBzYXZlZCFgLCB0aGlzLnNldHRpbmdzKTtcclxuICAgfVxyXG59XHJcblxyXG5jbGFzcyBvQnJvU2V0dGluZ3NUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuICAgcGx1Z2luOiBvQnJvO1xyXG5cclxuICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogb0Jybykge1xyXG4gICAgICBzdXBlcihhcHAsIHBsdWdpbik7XHJcbiAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICB9XHJcblxyXG4gICBkaXNwbGF5KCkge1xyXG4gICAgICB0aGlzLmNvbnRhaW5lckVsLmVtcHR5KCk7XHJcbiAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiR2VuZXJhbCBTZXR0aW5nc1wiIH0pO1xyXG5cclxuICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcImJcIiwgeyB0ZXh0OiBcIiBcIiB9KTtcclxuICAgICAgLy8gdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcImhyXCIsIHsgdGV4dDogXCIgXCIgfSk7XHJcbiAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiU2VhcmNoIFBhZ2VzXCIgfSk7XHJcbiAgICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXHJcbiAgICAgICAgIC5zZXROYW1lKFwiU2VhcmNoIFBhdGhcIilcclxuICAgICAgICAgLnNldERlc2MoXCJFbnRlciBhIHBhdGggcmVsYXRpdmUgdG8gdGhlIHZhdWx0IG9yIGAuYCBmb3IgdGhlIGN1cnJlbnQgcGFnZSBvbmx5LlwiKVxyXG4gICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+XHJcbiAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiRW50ZXIgdGhlIHBhdGggb3IgbGVhdmUgYmxhbmsgZm9yIGFsbC5cIilcclxuICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNlYXJjaFBhdGgpXHJcbiAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNlYXJjaFBhdGggPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICk7XHJcbiAgICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXHJcbiAgICAgICAgIC5zZXROYW1lKFwiVmlldyBIaWRkZW4gUGFnZXNcIilcclxuICAgICAgICAgLnNldERlc2MoXHJcbiAgICAgICAgICAgIFwiSW5jbHVkZSBwYWdlcyBhbmQgc3ViZGlyZWN0b3JpZXMgc3RhcnRpbmcgd2l0aCBgX2AuIFRoZXNlIGFyZSB1c3VhbGx5IGhpZGRlbiBmcm9tIHZpZXcuXCJcclxuICAgICAgICAgKVxyXG4gICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxyXG4gICAgICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mudmlld0hpZGRlbkZpbGVzKS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XHJcbiAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnZpZXdIaWRkZW5GaWxlcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgKTtcclxuXHJcbiAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJiXCIsIHsgdGV4dDogXCIgXCIgfSk7XHJcbiAgICAgIC8vIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoclwiLCB7IHRleHQ6IFwiIFwiIH0pO1xyXG4gICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIlNlYXJjaCBUYWdzXCIgfSk7XHJcbiAgICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXHJcbiAgICAgICAgIC5zZXROYW1lKFwiU2VhcmNoIFRhZ1wiKVxyXG4gICAgICAgICAuc2V0RGVzYyhcIlNlYXJjaCBmb3IgdGFza3Mgc3RhcnRpbmcgd2l0aCB0aGUgdGFnLiBMZWF2ZSBibGFuayBmb3IgYWxsIHRhZ3MuXCIpXHJcbiAgICAgICAgIC5hZGRUZXh0KHRleHQgPT5cclxuICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJFbnRlciB0aGUgdGFnIG9yIGxlYXZlIGJsYW5rIGZvciBhbGwuXCIpXHJcbiAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWFyY2hUYWcpXHJcbiAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNlYXJjaFRhZyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgKTtcclxuICAgICAgbmV3IFNldHRpbmcodGhpcy5jb250YWluZXJFbClcclxuICAgICAgICAgLnNldE5hbWUoXCJWaWV3IExpc3RcIilcclxuICAgICAgICAgLnNldERlc2MoXCJJbmNsdWRlIGJ1bGxldHMgKGxpc3QgaXRlbXMpIGluIHRoZSBzZWFyY2guIFRoZXNlIGFyZSB1c3VhbGx5IGhpZGRlbiBmcm9tIHZpZXcuXCIpXHJcbiAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XHJcbiAgICAgICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy52aWV3TGlzdCkub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xyXG4gICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy52aWV3TGlzdCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgKTtcclxuXHJcbiAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJiXCIsIHsgdGV4dDogXCIgXCIgfSk7XHJcbiAgICAgIC8vIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoclwiLCB7IHRleHQ6IFwiIFwiIH0pO1xyXG4gICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIlRhc2sgRm9ybWF0dGluZ1wiIH0pO1xyXG4gICAgICBuZXcgU2V0dGluZyh0aGlzLmNvbnRhaW5lckVsKVxyXG4gICAgICAgICAuc2V0TmFtZShcIkhlYWRlciBTaXplXCIpXHJcbiAgICAgICAgIC5zZXREZXNjKFwiRW50ZXIgYSBzaXplIGZyb20gMSAtIDYuXCIpXHJcbiAgICAgICAgIC5hZGRUZXh0KHRleHQgPT5cclxuICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCI1XCIpXHJcbiAgICAgICAgICAgICAgIC5zZXRWYWx1ZShcIlwiICsgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0hlYWRlclNpemUpXHJcbiAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGxldCBwYXJzZWQgPSBwYXJzZUludCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChpc05hTihwYXJzZWQpKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWQgPCAxIHx8IHBhcnNlZCA+IDYpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza0hlYWRlclNpemUgPSBwYXJzZWQ7XHJcbiAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICB0c2tzLmhlYWRlclNpemUgPSBwYXJzZWQ7XHJcbiAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBvQnJvOiBIZWFkZXIgU2l6ZWAsIHRoaXMucGx1Z2luLnNldHRpbmdzLCB0c2tzLmhlYWRlclNpemUpO1xyXG4gICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICApO1xyXG5cclxuICAgICAgLy8gdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJEYXRlIFNldHRpbmdzXCIgfSk7XHJcbiAgICAgIC8vIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXHJcbiAgICAgIC8vICAgICAuc2V0TmFtZShcIkVuYWJsZSBJbmxpbmUgUXVlcmllc1wiKVxyXG4gICAgICAvLyAgICAgLnNldERlc2MoXCJFbmFibGUgb3IgZGlzYWJsZSBleGVjdXRpbmcgcmVndWxhciBpbmxpbmUgRGF0YXZpZXcgcXVlcmllcy5cIilcclxuICAgICAgLy8gICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAvLyAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVJbmxpbmVEYXRhdmlldylcclxuICAgICAgLy8gICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnBsdWdpbi51cGRhdGVTZXR0aW5ncyh7IGVuYWJsZUlubGluZURhdGF2aWV3OiB2YWx1ZSB9KVxyXG4gICAgICAvLyAgICAgICAgIClcclxuICAgICAgLy8gICAgICk7XHJcbiAgICAgIC8vIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXHJcbiAgICAgIC8vICAgICAuc2V0TmFtZShcIkVuYWJsZSBJbmxpbmUgUXVlcmllc1wiKVxyXG4gICAgICAvLyAgICAgLnNldERlc2MoXCJFbmFibGUgb3IgZGlzYWJsZSBleGVjdXRpbmcgcmVndWxhciBpbmxpbmUgRGF0YXZpZXcgcXVlcmllcy5cIilcclxuICAgICAgLy8gICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAvLyAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVJbmxpbmVEYXRhdmlldylcclxuICAgICAgLy8gICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnBsdWdpbi51cGRhdGVTZXR0aW5ncyh7IGVuYWJsZUlubGluZURhdGF2aWV3OiB2YWx1ZSB9KVxyXG4gICAgICAvLyAgICAgICAgIClcclxuICAgICAgLy8gICAgICk7XHJcblxyXG4gICAgICAvLyAgICAgLnNldERlc2MoXCJTaXplIG9mIGhlYWRlcnMgcHJlc2VudGVkIHdpdGggd2l0aCB2aWV3LlwiKVxyXG4gICAgICAvLyB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiYlwiLCB7IHRleHQ6IFwiIFwiIH0pO1xyXG4gICAgICAvLyB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIkRpc3BsYXkgUHJlZmVyZW5jZXNcIiB9KTtcclxuICAgICAgLy8gbmV3IFNldHRpbmcodGhpcy5jb250YWluZXJFbClcclxuICAgICAgLy8gICAgIC5zZXROYW1lKFwiSGVhZGVyIFNpemVcIilcclxuICAgICAgLy8gICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAvLyAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVJbmxpbmVEYXRhdmlldylcclxuICAgICAgLy8gICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnBsdWdpbi51cGRhdGVTZXR0aW5ncyh7IGVuYWJsZUlubGluZURhdGF2aWV3OiB2YWx1ZSB9KVxyXG4gICAgICAvLyAgICAgICAgIClcclxuICAgICAgLy8gICAgICk7XHJcbiAgICAgIC8vIG5ldyBTZXR0aW5nKHRoaXMuY29udGFpbmVyRWwpXHJcbiAgICAgIC8vICAgICAuc2V0TmFtZShcIkVuYWJsZSBJbmxpbmUgUXVlcmllc1wiKVxyXG4gICAgICAvLyAgICAgLnNldERlc2MoXCJFbmFibGUgb3IgZGlzYWJsZSBleGVjdXRpbmcgcmVndWxhciBpbmxpbmUgRGF0YXZpZXcgcXVlcmllcy5cIilcclxuICAgICAgLy8gICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAvLyAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVJbmxpbmVEYXRhdmlldylcclxuICAgICAgLy8gICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB0aGlzLnBsdWdpbi51cGRhdGVTZXR0aW5ncyh7IGVuYWJsZUlubGluZURhdGF2aWV3OiB2YWx1ZSB9KVxyXG4gICAgICAvLyAgICAgICAgIClcclxuICAgICAgLy8gICAgICk7XHJcbiAgIH1cclxufVxyXG5cclxuLy8gLS0tLS0tLS0tLS0tLVxyXG4vLyBGaWxlcyAmIFBhZ2VzXHJcbi8vIC0tLS0tLS0tLS0tLS1cclxuXHJcbi8vIHRvZG8gLSBjaGVjayBpZiBmaWxlIGlzIGhpZGRlblxyXG5mdW5jdGlvbiBpc0ZpbGVWaXNpYmxlKGYsIHZpZXdIaWRkZW5GaWxlcykge1xyXG4gICB0cnkge1xyXG4gICAgICAvL2lmIChmID09ICcnKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIGlmICh2aWV3SGlkZGVuRmlsZXMpIHJldHVybiB0cnVlO1xyXG4gICAgICBjb25zdCBwYXRoUGFydHMgPSBmLnNwbGl0KFwiL1wiKTtcclxuICAgICAgLy8gY29uc29sZS5sb2coYHBhdGhQYXJ0c2AsIHBhdGhQYXJ0cywgZik7XHJcbiAgICAgIGxldCBpID0gcGF0aFBhcnRzLmxlbmd0aCAtIDE7XHJcbiAgICAgIHdoaWxlIChpID49IDApIHtcclxuICAgICAgICAgLy8gY29uc29sZS5sb2coYHBhdGhQYXJ0c1tgLCBpLCBgXSBcImAsIHBhdGhQYXJ0c1tpXSwgYFwiYCk7XHJcbiAgICAgICAgIGlmIChwYXRoUGFydHNbaV0uc3RhcnRzV2l0aChcIl9cIikpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgLS1pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOiBcIiwgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgIH1cclxufVxyXG5cclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vIENvbnRleHQgTWFuYWdlbWVudFxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbmxldCBjdHggPSB7XHJcbiAgIHRvZGF5OiB7fSxcclxuICAgc293OiB7fSxcclxuICAgZW93OiB7fSxcclxuICAgZW9udzoge30sXHJcbiAgIHNvNHdhOiB7fSxcclxuXHJcbiAgIHNlYXJjaFRhZzogbnVsbCxcclxuICAgdmlld0xpc3Q6IG51bGwsXHJcbiAgIHNlYXJjaFBhdGg6IG51bGwsXHJcbiAgIHZpZXdIaWRkZW5GaWxlczogbnVsbCxcclxuICAgaGVhZGVyU2l6ZToge30sXHJcblxyXG4gICAvLyBhZGQgcGFyYW0gdG8gb3ZlcnJpZGUgdG9kYXlcclxuICAgdXBkYXRlRGF0ZXMoZHYpIHtcclxuICAgICAgY29uc3QgeyBEYXRlVGltZSB9ID0gZHYubHV4b247XHJcbiAgICAgIHRoaXMudG9kYXkgPSBkdi5kYXRlKFwidG9kYXlcIik7XHJcbiAgICAgIHRoaXMuc293ID0gdGhpcy50b2RheS5wbHVzKHsgZGF5czogLSh0aGlzLnRvZGF5LndlZWtkYXkgJSA3KSB9KTtcclxuICAgICAgdGhpcy5lb3cgPSB0aGlzLnNvdy5wbHVzKHsgZGF5czogNywgbWlsbGlzZWNvbmRzOiAtMSB9KTtcclxuICAgICAgdGhpcy5lb253ID0gdGhpcy5lb3cucGx1cyh7IGRheXM6IDcgfSk7XHJcbiAgICAgIHRoaXMuc280d2EgPSB0aGlzLnNvdy5wbHVzKHsgZGF5czogLTI4IH0pO1xyXG4gICAgICAvLyBjb25zb2xlLmxvZyhgb0JybzogdXBkYXRlRGF0ZXNgLCB0b2RheSwgc293LCBlb3csIGVvbncsIHNvNHdhKTtcclxuICAgfSxcclxuXHJcbiAgIHVwZGF0ZUNyaXRlcmlhKHNldHRpbmdzLCBkdiwgYXJncykge1xyXG4gICAgICB0aGlzLnNlYXJjaFRhZyA9IHNldHRpbmdzLnNlYXJjaFRhZztcclxuICAgICAgdGhpcy52aWV3TGlzdCA9IHNldHRpbmdzLnZpZXdMaXN0O1xyXG4gICAgICB0aGlzLnNlYXJjaFBhdGggPSBzZXR0aW5ncy5zZWFyY2hQYXRoO1xyXG4gICAgICB0aGlzLnZpZXdIaWRkZW5GaWxlcyA9IHNldHRpbmdzLnZpZXdIaWRkZW5GaWxlcztcclxuICAgICAgdGhpcy5oZWFkZXJTaXplID0gc2V0dGluZ3MudGFza0hlYWRlclNpemU7XHJcbiAgICAgIGlmIChhcmdzKSB7XHJcbiAgICAgICAgIGlmIChhcmdzLnNlYXJjaFRhZykgdGhpcy5zZWFyY2hUYWcgPSBhcmdzLnNlYXJjaFRhZztcclxuICAgICAgICAgaWYgKGFyZ3Mudmlld0xpc3QpIHRoaXMudmlld0xpc3QgPSBhcmdzLnZpZXdMaXN0O1xyXG4gICAgICAgICBpZiAoYXJncy5zZWFyY2hQYXRoKSB0aGlzLnNlYXJjaFBhdGggPSBhcmdzLnNlYXJjaFBhdGg7XHJcbiAgICAgICAgIGlmIChhcmdzLnZpZXdIaWRkZW5GaWxlcykgdGhpcy52aWV3SGlkZGVuRmlsZXMgPSBhcmdzLnZpZXdIaWRkZW5GaWxlcztcclxuICAgICAgfVxyXG4gICB9LFxyXG5cclxuICAgZ2V0Q29udGV4dChzZXR0aW5ncywgZHYsIGFyZ3MpIHtcclxuICAgICAgdGhpcy51cGRhdGVEYXRlcyhkdik7XHJcbiAgICAgIHRoaXMudXBkYXRlQ3JpdGVyaWEoc2V0dGluZ3MsIGR2LCBhcmdzKTtcclxuICAgfSxcclxufTtcclxuXHJcbi8vIC0tLS0tLS0tLS0tLS0tLVxyXG4vLyBUYXNrIE1hbmFnZW1lbnRcclxuLy8gLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5sZXQgdHNrcyA9IHtcclxuICAgZ2V0QWxsVHM6IDAsXHJcbiAgIHNvcnRUczogMCxcclxuICAgYWxsOiBbXSxcclxuICAgb3ZlcmR1ZTogW10sXHJcbiAgIHRoaXNXZWVrOiBbXSxcclxuICAgbmV4dFdlZWs6IFtdLFxyXG4gICBzdGFydGVkOiBbXSxcclxuICAgbm90UHJpb3JpdGl6ZWQ6IFtdLFxyXG4gICBjb21wbGV0ZWQ6IFtdLFxyXG4gICBoZWFkZXJTaXplOiA1LFxyXG5cclxuICAgYXN5bmMgZ2V0QWxsKGR2LCBhcmdzKSB7XHJcbiAgICAgIHRoaXMuYWxsID0gW107XHJcbiAgICAgIHRoaXMuZ2V0QWxsVHMgPSBudWxsO1xyXG4gICAgICBjb25zb2xlLmxvZyhcInBhZ2VzXCIsIGR2LnBhZ2VzKGN0eC5zZWFyY2hQYXRoKSk7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgIGlmIChjdHguc2VhcmNoUGF0aCA9PSBcIi5cIikgdGhpcy5hbGwgPSBhd2FpdCBkdi5jdXJyZW50KCkuZmlsZS50YXNrcztcclxuICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aGlzLmFsbCA9IGF3YWl0IGR2XHJcbiAgICAgICAgICAgICAgIC5wYWdlcyhjdHguc2VhcmNoUGF0aClcclxuICAgICAgICAgICAgICAgLndoZXJlKHAgPT4gaXNGaWxlVmlzaWJsZShwLmZpbGUucGF0aCwgY3R4LnZpZXdIaWRkZW5GaWxlcykpLmZpbGUudGFza3M7XHJcbiAgICAgICAgIHRoaXMuZ2V0QWxsVHMgPSBEYXRlLm5vdygpO1xyXG4gICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgY29uc29sZS5lcnJvcihcIm9Ccm86IHRza3MuZ2V0QWxsIGZhaWw6IFwiLCBlcnIubWVzc2FnZSwgY3R4LnNlYXJjaFBhdGgpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKGBvQnJvOiBnZXRBbGxUc2AsIHRoaXMuYWxsLCB0aGlzLmdldEFsbFRzLCBEYXRlLm5vdygpIC0gdGhpcy5nZXRBbGxUcyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgfSxcclxuICAgYXN5bmMgc29ydChkdikge1xyXG4gICAgICB0aGlzLm92ZXJkdWUgPSBbXTtcclxuICAgICAgdGhpcy50aGlzV2VlayA9IFtdO1xyXG4gICAgICB0aGlzLm5leHRXZWVrID0gW107XHJcbiAgICAgIHRoaXMuc3RhcnRlZCA9IFtdO1xyXG4gICAgICB0aGlzLm5vdFByaW9yaXRpemVkID0gW107XHJcbiAgICAgIHRoaXMuY29tcGxldGVkID0gW107XHJcbiAgICAgIHRoaXMuc29ydFRzID0gbnVsbDtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICAgZm9yIChsZXQgdCBvZiB0aGlzLmFsbCkge1xyXG4gICAgICAgICAgICBpZiAodC5jb21wbGV0ZWQpIHtcclxuICAgICAgICAgICAgICAgaWYgKGN0eC5zbzR3YSA8PSB0LmNvbXBsZXRpb24pIHRoaXMuY29tcGxldGVkLnB1c2godCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXQuZHVlKSB7XHJcbiAgICAgICAgICAgICAgIGlmICh0LnN0YXJ0ICYmIHQuc3RhcnQgPD0gY3R4LnRvZGF5KSB0aGlzLnN0YXJ0ZWQucHVzaCh0KTtcclxuICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiVGFza1wiLCB0LCB0aGlzLm5vdFByaW9yaXRpemVkKTtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5ub3RQcmlvcml0aXplZC5wdXNoKHQpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodC5kdWUgJiYgdC5kdWUgPCBjdHgudG9kYXkpIHRoaXMub3ZlcmR1ZS5wdXNoKHQpO1xyXG4gICAgICAgICAgICBlbHNlIGlmIChjdHguc293IDw9IHQuZHVlICYmIHQuZHVlIDw9IGN0eC5lb3cpIHRoaXMudGhpc1dlZWsucHVzaCh0KTtcclxuICAgICAgICAgICAgZWxzZSBpZiAoY3R4LmVvdyA8IHQuZHVlICYmIHQuZHVlIDw9IGN0eC5lb253KSB0aGlzLm5leHRXZWVrLnB1c2godCk7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHQuc3RhcnQgJiYgdC5zdGFydCA8PSBjdHgudG9kYXkpIHRoaXMuc3RhcnRlZC5wdXNoKHQpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIHRoaXMub3ZlcmR1ZSA9IGR2LmFycmF5KHRoaXMub3ZlcmR1ZSk7XHJcbiAgICAgICAgIHRoaXMudGhpc1dlZWsgPSBkdi5hcnJheSh0aGlzLnRoaXNXZWVrKTtcclxuICAgICAgICAgdGhpcy5uZXh0V2VlayA9IGR2LmFycmF5KHRoaXMubmV4dFdlZWspO1xyXG4gICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBkdi5hcnJheSh0aGlzLnN0YXJ0ZWQpO1xyXG4gICAgICAgICB0aGlzLm5vdFByaW9yaXRpemVkID0gZHYuYXJyYXkodGhpcy5ub3RQcmlvcml0aXplZCk7XHJcbiAgICAgICAgIHRoaXMuY29tcGxldGVkID0gZHYuYXJyYXkodGhpcy5jb21wbGV0ZWQpO1xyXG4gICAgICAgICB0aGlzLnNvcnRUcyA9IERhdGUubm93KCk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICBjb25zb2xlLmVycm9yKFwib0JybzogdHNrcy5zb3J0IGZhaWw6IFwiLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gY29uc29sZS5sb2coYG9Ccm86IHNvcnRUc2AsIHRoaXMub3ZlcmR1ZSwgdGhpcy50aGlzV2VlaywgdGhpcy5uZXh0V2VlaywgdGhpcy5zdGFydGVkLCB0aGlzLm5vdFByaW9yaXRpemVkLCB0aGlzLmNvbXBsZXRlZCwgdGhpcy5zb3J0VHMpO1xyXG4gICAgICBzdGF0dXNCYXIuY2hpbGRyZW5bMF0uc2V0VGV4dChcclxuICAgICAgICAgYE92ZXJkdWU6JHt0aGlzLm92ZXJkdWUubGVuZ3RofSBUaGlzIFdlZWs6JHt0aGlzLnRoaXNXZWVrLmxlbmd0aH1gXHJcbiAgICAgICk7XHJcbiAgICAgIHJldHVybjtcclxuICAgfSxcclxuICAgYXN5bmMgdXBkYXRlKHNldHRpbmdzLCBkdiwgYXJncykge1xyXG4gICAgICAvLyBjb25zb2xlLmxvZyhgU2V0dGluZ3M6IGAsIHNldHRpbmdzLCBkdiwgYXJncyk7XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKGBoZWFkZXIgc2l6ZTogYCwgc2V0dGluZ3MudGFza0hlYWRlclNpemUsIHRza3MuaGVhZGVyU2l6ZSk7XHJcbiAgICAgIHRza3MuaGVhZGVyU2l6ZSA9IHNldHRpbmdzLnRhc2tIZWFkZXJTaXplO1xyXG4gICAgICBjdHguZ2V0Q29udGV4dChzZXR0aW5ncywgZHYsIGFyZ3MpO1xyXG4gICAgICBhd2FpdCB0aGlzLmdldEFsbChkdiwgYXJncyk7XHJcbiAgICAgIGF3YWl0IHRoaXMuc29ydChkdik7XHJcbiAgIH0sXHJcbiAgIGFzeW5jIHNob3coZHYsIHRpdGxlLCB0YXNrcykge1xyXG4gICAgICBpZiAoIXRhc2tzIHx8ICF0YXNrcy5sZW5ndGgpIHJldHVybjtcclxuICAgICAgYXdhaXQgZHYuaGVhZGVyKHRoaXMuaGVhZGVyU2l6ZSwgdGl0bGUgKyBcIiAoXCIgKyB0YXNrcy5sZW5ndGggKyBcIilcIik7XHJcbiAgICAgIGF3YWl0IGR2LnRhc2tMaXN0KHRhc2tzLCBmYWxzZSk7XHJcbiAgIH0sXHJcbn07XHJcblxyXG4vLyAtLS0tLS0tLS0tLS0tLS1cclxuLy8gVGFncyBNYW5hZ2VtZW50XHJcbi8vIC0tLS0tLS0tLS0tLS0tLVxyXG5cclxubGV0IHRhZ3MgPSB7XHJcbiAgIGFsbDogW10sXHJcbiAgIHVuaXF1ZTogW10sXHJcbiAgIHRhZ1RzOiAwLFxyXG4gICBoZWFkZXJTaXplOiA1LFxyXG5cclxuICAgYXN5bmMgZ2V0QWxsKGR2LCBhcmdzKSB7XHJcbiAgICAgIHRoaXMuYWxsID0gW107XHJcbiAgICAgIHRoaXMudGFnVHMgPSBudWxsO1xyXG4gICAgICBjb25zb2xlLmxvZyhcImN0eFwiLCBjdHgpO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgICBpZiAoY3R4LnNlYXJjaFBhdGggPT0gXCIuXCIpIHRoaXMuYWxsID0gYXdhaXQgZHYuY3VycmVudCgpLmZpbGUubGlzdHM7XHJcbiAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhpcy5hbGwgPSBhd2FpdCBkdlxyXG4gICAgICAgICAgICAgICAucGFnZXMoY3R4LnNlYXJjaFBhdGgpXHJcbiAgICAgICAgICAgICAgIC53aGVyZShwID0+IGlzRmlsZVZpc2libGUocC5maWxlLnBhdGgsIGN0eC52aWV3SGlkZGVuRmlsZXMpKVxyXG4gICAgICAgICAgICAgICAuZmlsZS5saXN0cy53aGVyZSh0ID0+IHQudGFncy5sZW5ndGggPiAwKTtcclxuICAgICAgICAgdGhpcy50YWdUcyA9IERhdGUubm93KCk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICBjb25zb2xlLmVycm9yKFwib0JybzogdGFncy5nZXRBbGwgZmFpbDogXCIsIGVyci5tZXNzYWdlKTtcclxuICAgICAgfVxyXG4gICAgICBsZXQgdW5pcXVlVGFncyA9IEFycmF5LmZyb20obmV3IFNldCh0aGlzLmFsbC50YWdzKSkuc29ydCgpO1xyXG4gICAgICBjb25zb2xlLmxvZyhgb0JybzogdGFnVHNgLCB0aGlzLmFsbCwgdW5pcXVlVGFncywgRGF0ZS5ub3coKSAtIHRoaXMudGFnVHMpO1xyXG5cclxuICAgICAgZm9yIChsZXQgdCBvZiB1bmlxdWVUYWdzKSB7XHJcbiAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBvQnJvOiB0YWcuYWxsYCwgdCwgdGhpcy5hbGwpO1xyXG4gICAgICAgICBhd2FpdCB0aGlzLnZpZXcoXHJcbiAgICAgICAgICAgIGR2LFxyXG4gICAgICAgICAgICB0LFxyXG4gICAgICAgICAgICB0aGlzLmFsbC53aGVyZShcclxuICAgICAgICAgICAgICAgdyA9PlxyXG4gICAgICAgICAgICAgICAgICB3LnRhZ3MuaW5jbHVkZXModCkgJiZcclxuICAgICAgICAgICAgICAgICAgKHcudGFzayB8fCBjdHgudmlld0xpc3QpICYmXHJcbiAgICAgICAgICAgICAgICAgIHcuc3RhdHVzICE9IFwieFwiICYmXHJcbiAgICAgICAgICAgICAgICAgIHcuc3RhdHVzICE9IFwiLVwiXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICB9LFxyXG5cclxuICAgYXN5bmMgdXBkYXRlKHNldHRpbmdzLCBkdiwgYXJncykge1xyXG4gICAgICBjdHguZ2V0Q29udGV4dChzZXR0aW5ncywgZHYsIGFyZ3MpO1xyXG4gICAgICBjb25zb2xlLmxvZyhgb0JybzogdGFncy51cGRhdGVgLCBhcmdzLCBzZXR0aW5ncywgY3R4KTtcclxuICAgICAgYXdhaXQgdGhpcy5nZXRBbGwoZHYsIGFyZ3MpO1xyXG4gICAgICBjb25zb2xlLmxvZyhgb0JybzogdGFncy51cGRhdGVgLCB0aGlzLmFsbCk7XHJcbiAgIH0sXHJcblxyXG4gICBhc3luYyB2aWV3KGR2LCB0aXRsZSwgdGFncykge1xyXG4gICAgICBpZiAoIXRhZ3MgfHwgIXRhZ3MubGVuZ3RoKSByZXR1cm47XHJcbiAgICAgIGF3YWl0IGR2LmhlYWRlcih0aGlzLmhlYWRlclNpemUsIHRpdGxlICsgXCIgKFwiICsgdGFncy5sZW5ndGggKyBcIilcIik7XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKHRpdGxlLCB0YWdzKTtcclxuICAgICAgYXdhaXQgZHYudGFza0xpc3QodGFncywgZmFsc2UpO1xyXG4gICB9LFxyXG59O1xyXG5cclxuLy8gLS0tLS0tLS0tLS1cclxuLy8gVVJMIHBhc3RpbmdcclxuLy8gLS0tLS0tLS0tLS1cclxuXHJcbmxldCBVUkwgPSB7XHJcbiAgIGlzVmFsaWRVUkwodXJsKTogYm9vbGVhbiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgIG5ldyBVUkwodXJsKTtcclxuICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICB9LFxyXG5cclxuICAgYXN5bmMgZ2V0TWRVUkwob2JzaWRpYW4sIHVybCkge1xyXG4gICAgICBjb25zb2xlLmxvZyh3aW5kb3cubG9jYXRpb24ub3JpZ2luKTtcclxuXHJcbiAgICAgIGlmICghdGhpcy5pc1ZhbGlkVVJMKHVybCkpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBVUkxcIik7XHJcbiAgICAgIH1cclxuICAgICAgbGV0IHAgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgICByZXNvbHZlKFxyXG4gICAgICAgICAgICBvYnNpZGlhbi5yZXF1ZXN0VXJsKHVybCwge1xyXG4gICAgICAgICAgICAgICAvLyByZXNvbHZlKGZldGNoKHVybCwge1xyXG4gICAgICAgICAgICAgICBtb2RlOiBcImNvcnNcIixcclxuICAgICAgICAgICAgICAgY3JlZGVudGlhbHM6IFwiaW5jbHVkZVwiLFxyXG4gICAgICAgICAgICAgICBvcmlnaW46IFwiXCIsXHJcbiAgICAgICAgICAgICAgIGJvZHk6IFwidGV4dFwiLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICApO1xyXG4gICAgICB9KTtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBwO1xyXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9IDIwMCkge1xyXG4gICAgICAgICBjb25zb2xlLmVycm9yKHJlc3BvbnNlLnN0YXR1cyk7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5ldHdvcmsgcmVzcG9uc2Ugd2FzIG5vdCBva1wiKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBodG1sID0gcmVzcG9uc2UudGV4dDtcclxuICAgICAgY29uc3QgZG9jID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhodG1sLCBcInRleHQvaHRtbFwiKTtcclxuICAgICAgY29uc3QgdGl0bGUgPSBkb2MucXVlcnlTZWxlY3RvcihcInRpdGxlXCIpLmlubmVyVGV4dDtcclxuICAgICAgLy8gY29uc29sZS5sb2coJ1RpdGxlOicsIHRpdGxlLCByZXNwb25zZSk7XHJcbiAgICAgIHJldHVybiBgWyR7dGl0bGV9XSgke3VybH0pYDtcclxuICAgfSxcclxufTtcclxuXHJcbi8vIC0tLS0tLS0tLVxyXG4vLyBEYXNoYm9hcmRcclxuLy8gLS0tLS0tLS0tXHJcbmZ1bmN0aW9uIGluc2VydEdyZWVrZWRUYWJsZSgpIHtcclxuICAgY29uc3QgZWRpdG9yID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWYudmlldy5zb3VyY2VNb2RlLmNtRWRpdG9yO1xyXG5cclxuICAgLy8gQ3JlYXRlIHRoZSB0YWJsZSBlbGVtZW50XHJcbiAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRhYmxlXCIpO1xyXG5cclxuICAgLy8gQXBwbHkgQ1NTIHN0eWxpbmdcclxuICAgdGFibGUuc3R5bGUuYm9yZGVyQ29sbGFwc2UgPSBcImNvbGxhcHNlXCI7XHJcbiAgIHRhYmxlLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XHJcbiAgIHRhYmxlLnN0eWxlLmJvcmRlciA9IFwiMXB4IHNvbGlkIGJsYWNrXCI7XHJcblxyXG4gICAvLyBDcmVhdGUgdGFibGUgcm93cyBhbmQgY2VsbHMgd2l0aCBncmVla2VkIHRleHRcclxuICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcclxuICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xyXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDI7IGorKykge1xyXG4gICAgICAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gICAgICAgICBjZWxsLnRleHRDb250ZW50ID0gXCJMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzY2luZyBlbGl0LlwiO1xyXG4gICAgICAgICBjZWxsLnN0eWxlLmJvcmRlciA9IFwiMXB4IHNvbGlkIGJsYWNrXCI7XHJcbiAgICAgICAgIGNlbGwuc3R5bGUucGFkZGluZyA9IFwiOHB4XCI7XHJcbiAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjZWxsKTtcclxuICAgICAgfVxyXG4gICAgICB0YWJsZS5hcHBlbmRDaGlsZChyb3cpO1xyXG4gICB9XHJcblxyXG4gICAvLyBDb252ZXJ0IHRoZSB0YWJsZSBlbGVtZW50IHRvIG1hcmtkb3duXHJcbiAgIGNvbnN0IHRhYmxlTWFya2Rvd24gPSBcImBgYGh0bWxcXG5cIiArIHRhYmxlLm91dGVySFRNTCArIFwiXFxuYGBgXCI7XHJcbiAgIGNvbnNvbGUubG9nKHRhYmxlTWFya2Rvd24pO1xyXG4gICAvLyBJbnNlcnQgdGhlIG1hcmtkb3duIGludG8gdGhlIGVkaXRvclxyXG4gICBlZGl0b3IucmVwbGFjZVNlbGVjdGlvbih0YWJsZU1hcmtkb3duKTtcclxufVxyXG5cclxubGV0IGRhc2ggPSB7XHJcbiAgIGFkZENhcmQodGl0bGUsIGNvbnRlbnQpIHtcclxuICAgICAgY29uc3QgY2FyZCA9IGNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcIm9icm8tY2FyZFwiIH0pO1xyXG4gICAgICBjYXJkLmFwcGVuZENoaWxkKGNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogdGl0bGUsIGNsczogXCJvYnJvLWNhcmQtdGl0bGVcIiB9KSk7XHJcbiAgICAgIGNhcmQuYXBwZW5kQ2hpbGQoY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBcIlwiIH0pKTtcclxuICAgICAgY2FyZC5pbm5lckhUTUwgKz0gY29udGVudDtcclxuICAgICAgcmV0dXJuIGNhcmQ7XHJcbiAgIH0sXHJcbn07XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQSxzQkFTTztBQVpQO0FBdUJBLElBQU0sbUJBQWlDO0FBQUEsRUFDcEMsV0FBVztBQUFBLEVBQ1gsVUFBVTtBQUFBLEVBQ1YsWUFBWTtBQUFBLEVBQ1osaUJBQWlCO0FBQUEsRUFDakIsZ0JBQWdCO0FBQ25CO0FBRUEsSUFBSTtBQUVKLElBQXFCLE9BQXJCLGNBQWtDLHVCQUFPO0FBQUEsRUFHdEMsTUFBTSxTQUFTO0FBQ1osVUFBTSxLQUFLLGFBQWE7QUFDeEIsU0FBSyxJQUFJLFVBQVUsY0FBYyxNQUFNO0FBRXBDLFVBQUksS0FBSyxJQUFJLFFBQVEsUUFBUSxVQUFVLEdBQUc7QUFDdkMsZ0JBQVEsSUFBSSxRQUFRLEtBQUssU0FBUyxvQ0FBb0M7QUFBQSxNQUN6RSxPQUFPO0FBQ0osZ0JBQVEsTUFBTSxRQUFRLEtBQUssU0FBUyx1Q0FBdUM7QUFBQSxNQUM5RTtBQUVBLGtCQUFZLEtBQUssaUJBQWlCO0FBQ2xDLGdCQUFVLFNBQVMsUUFBUSxF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
